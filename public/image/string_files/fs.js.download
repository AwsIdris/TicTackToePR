(function(){var N=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,g){a.__proto__=g}||function(a,g){for(var f in g)g.hasOwnProperty(f)&&(a[f]=g[f])};return function(k,g){function f(){this.constructor=k}a(k,g);k.prototype=null===g?Object.create(g):(f.prototype=g.prototype,new f)}}(),y=this&&this.__awaiter||function(a,k,g,f){return new (g||(g=U))(function(c,b){function d(a){try{e(f.next(a))}catch(d){b(d)}}function h(a){try{e(f["throw"](a))}catch(d){b(d)}}
function e(a){a.done?c(a.value):(new g(function(b){b(a.value)})).then(d,h)}e((f=f.apply(a,k||[])).next())})},J=this&&this.__generator||function(a,k){function g(a){return function(b){return f([a,b])}}function f(e){if(b)throw new TypeError("Generator is already executing.");for(;c;)try{if(b=1,d&&(h=d[e[0]&2?"return":e[0]?"throw":"next"])&&!(h=h.call(d,e[1])).done)return h;if(d=0,h)e=[0,h.value];switch(e[0]){case 0:case 1:h=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++;d=e[1];
e=[0];continue;case 7:e=c.ops.pop();c.trys.pop();continue;default:if(!(h=c.trys,h=0<h.length&&h[h.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!h||e[1]>h[0]&&e[1]<h[3])){c.label=e[1];break}if(6===e[0]&&c.label<h[1]){c.label=h[1];h=e;break}if(h&&c.label<h[2]){c.label=h[2];c.ops.push(e);break}h[2]&&c.ops.pop();c.trys.pop();continue}e=k.call(a,c)}catch(f){e=[6,f],d=0}finally{b=h=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var c={label:0,sent:function(){if(h[0]&1)throw h[1];
return h[1]},trys:[],ops:[]},b,d,h,e;return e={next:g(0),"throw":g(1),"return":g(2)},"function"===typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},m;(function(a){var k;a.Namespace=function(a){if(!k){var f=a._fs_loaded;k=f?f:a._fs_namespace?a._fs_namespace:"FS"}return k};a.isLoaded=function(a){return a._fs_loaded};a.setLoaded=function(a,f){a._fs_loaded=f;f in a||(a[f]={})}})(m||(m={}));(function(a){a._fs_debug=function(a){return!!a._fs_ext_debug||!!a._fs_debug};a._fs_host=function(a){return a._fs_ext_host||
a._fs_host};a._fs_org=function(a){return a._fs_ext_org||a._fs_org};a._fs_csp=function(a){return a._fs_csp};a._fs_cookie_domain=function(a){return a._fs_cookie_domain};a._fs_ready=function(a){return a._fs_ready};a._fs_run_in_iframe=function(a){return!!a._fs_run_in_iframe};a._fs_is_outer_script=function(a){return!!a._fs_is_outer_script};a._fs_replay_flags=function(a){return a._fs_replay_flags};a._fs_transport=function(a){return a._fs_transport};a.set_fs_shutdown=function(a,g){a._fs_shutdown=g};a.FS_q_drain=
function(k){if((k=k[a.Namespace(k)])&&"q"in k){var g=k.q;delete k.q;return g}return[]};a.FS_q_push=function(k,g){var f=k[a.Namespace(k)];"q"in f||(f.q=[]);f.q.push(g)}})(m||(m={}));(function(a){a.CompiledTimestamp=1510329025;a.CompiledVersion="UNSET"})(m||(m={}));(function(a){function k(){var d,h;try{throw Error("");}catch(l){d="<generated>\n",h=l.stack||l.backtrace||l.stacktrace}if(!h){d="<generated-ie>\n";h=[];try{for(var g=arguments.callee.caller.caller;g&&h.length<f;){var k=b.test(g.toString())?
RegExp.$1||c:c;h.push(k);g=g.caller}}catch(p){a.logIfDebug(p)}h=h.join("\n")}return d+h}function g(b,h){if(!(0>=d)){d--;var c=a.getCookies(document).fs_uid;(c=c?a.parseIdentityCookie(c):void 0)&&c.OrgId!=a._fs_org(window)&&(c=void 0);var f=window.location.origin,g=(new Date).getTime(),p;try{p=window.self!==window.top}catch(q){p=!0}p={projectRoot:f,"metaData[device][time]":g,"metaData[misc][inIframe]":p,"metaData[misc][CompiledTimestamp]":a.CompiledTimestamp,"metaData[misc][CompiledTime]":(new Date(1E3*
a.CompiledTimestamp)).toISOString(),"metaData[misc][orgId]":a._fs_org(window),"metaData[misc][userId:sessionId]":c?c.UserId+":"+c.SessionId:"NA",context:document.location.pathname,message:b.message,name:"Recording Error",payloadVersion:3,releaseStage:"production "+(new Date(1E3*a.CompiledTimestamp)).toISOString(),severity:h,notfierVersion:"3.2.0",language:navigator.language||navigator.userLanguage||"en-GB",stacktrace:b.stack||(b.backtrace||b.stacktrace)||k(),apiKey:"38f089fdedbe27e3ca594fb18cdbc78e",
ct:"img",cb:(new Date).getTime()};var c=[],r;for(r in p)c.push(encodeURIComponent(r)+"="+encodeURIComponent(p[r]));(new Image).src="https://notify.bugsnag.com/js?"+c.sort().join("&")}}var f=10,c="[anonymous]",b=/function\s*([\w\-$]+)?\s*\(/i;a.generateStacktrace=k;var d=15;a.sendToBugsnag=g;var h={};a.assert=function(a,b,d){void 0===d&&(d=1);if(a)return!0;h[b]=h[b]||0;h[b]++;if(h[b]>d)return!1;g(Error("Assertion failed: "+b),"error");return a}})(m||(m={}));(function(a){function k(){var a=0,b=new O(c),
d=document.createTextNode("");b.observe(d,{characterData:!0});return function(){var b=a=++a%2;d.data=b+""}}function g(){var a=new MessageChannel;a.port1.onmessage=c;return function(){return a.port2.postMessage(0)}}function f(){var a=setTimeout;return function(){return a(c,1)}}function c(){for(var a=0;a<B;a+=2)(0,E[a])(E[a+1]),E[a]=void 0,E[a+1]=void 0;B=0}function b(a,b){var d=arguments,c=this,e=new this.constructor(h);void 0===e[P]&&z(e);var f=c._state;f?function(){var a=d[f-1];C(function(){return Q(f,
e,a,c._result)})}():v(c,e,a,b);return e}function d(a){if(a&&"object"===typeof a&&a.constructor===this)return a;var b=new this(h);p(b,a);return b}function h(){}function e(a){try{return a.then}catch(b){return K.error=b,K}}function n(a,b,d,h,c){try{a.call(b,d,h)}catch(e){return e}}function l(a,b,d){C(function(a){var h=!1,c=n(d,b,function(d){h||(h=!0,b!==d?p(a,d):r(a,d))},function(b){h||(h=!0,s(a,b))},"Settle: "+(a._label||" unknown promise"));!h&&c&&(h=!0,s(a,c))},a)}function D(a,b){b._state===L?r(a,
b._result):b._state===F?s(a,b._result):v(b,void 0,function(b){return p(a,b)},function(b){return s(a,b)})}function t(a,h,c){h.constructor===a.constructor&&c===b&&h.constructor.resolve===d?D(a,h):c===K?(s(a,K.error),K.error=null):void 0===c?r(a,h):"function"===typeof c?l(a,h,c):r(a,h)}function p(a,b){a===b?s(a,new TypeError("You cannot resolve a promise with itself")):"function"===typeof b||"object"===typeof b&&null!==b?t(a,b,e(b)):r(a,b)}function q(a){a._onerror&&a._onerror(a._result);w(a)}function r(a,
b){a._state===G&&(a._result=b,a._state=L,0!==a._subscribers.length&&C(w,a))}function s(a,b){a._state===G&&(a._state=F,a._result=b,C(q,a))}function v(a,b,d,h){var c=a._subscribers,e=c.length;a._onerror=null;c[e]=b;c[e+L]=d;c[e+F]=h;0===e&&a._state&&C(w,a)}function w(a){var b=a._subscribers,d=a._state;if(0!==b.length){for(var h,c,e=a._result,f=0;f<b.length;f+=3)h=b[f],c=b[f+d],h?Q(d,h,c,e):c(e);a._subscribers.length=0}}function m(){this.error=null}function Q(a,b,d,h){var c="function"===typeof d,e,f,
q,n;if(c){try{e=d(h)}catch(l){R.error=l,e=R}e===R?(n=!0,f=e.error,e.error=null):q=!0;if(b===e){s(b,new TypeError("A promises callback cannot return that same promise."));return}}else e=h,q=!0;b._state===G&&(c&&q?p(b,e):n?s(b,f):a===L?r(b,e):a===F&&s(b,e))}function H(a,b){try{b(function(b){p(a,b)},function(b){s(a,b)})}catch(d){s(a,d)}}function z(a){a[P]=y++;a._state=void 0;a._result=void 0;a._subscribers=[]}function u(a,b){this._instanceConstructor=a;this.promise=new a(h);this.promise[P]||z(this.promise);
M(b)?(this._input=b,this._remaining=this.length=b.length,this._result=Array(this.length),0===this.length?r(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&r(this.promise,this._result))):s(this.promise,Error("Array Methods must be provided an Array"))}var I=void 0,M=I=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},B=0,C=function(a,b){E[B]=a;E[B+1]=b;B+=2;2===B&&T()},O=window.MutationObserver||window.WebKitMutationObserver,
I="undefined"!==typeof Uint8ClampedArray&&void 0!=typeof self&&"undefined"!==typeof self.importScripts&&"undefined"!==typeof MessageChannel,E=Array(1E3),T;T=O?k():I?g():f();var P=Math.random().toString(36).substring(16),G=void 0,L=1,F=2,K=new m,R=new m,y=0;u.prototype._enumerate=function(){for(var a=this.length,b=this._input,d=0;this._state===G&&d<a;d++)this._eachEntry(b[d],d)};u.prototype._eachEntry=function(a,c){var f=this._instanceConstructor,q=f.resolve;q===d?(q=e(a),q===b&&a._state!==G?this._settledAt(a._state,
c,a._result):"function"!==typeof q?(this._remaining--,this._result[c]=a):f===A?(f=new f(h),t(f,a,q),this._willSettleAt(f,c)):this._willSettleAt(new f(function(b){return b(a)}),c)):this._willSettleAt(q(a),c)};u.prototype._settledAt=function(a,b,d){var c=this.promise;c._state===G&&(this._remaining--,a===F?s(c,d):this._result[b]=d);0===this._remaining&&r(c,this._result)};u.prototype._willSettleAt=function(a,b){var d=this;v(a,void 0,function(a){return d._settledAt(L,b,a)},function(a){return d._settledAt(F,
b,a)})};var A=function(a){this[P]=y++;this._result=this._state=void 0;this._subscribers=[];if(h!==a){if("function"!==typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof A)H(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}};A.all=function(a){return(new u(this,a)).promise};A.race=function(a){var b=this;return M(a)?
new b(function(d,c){for(var h=a.length,e=0;e<h;e++)b.resolve(a[e]).then(d,c)}):new b(function(a,b){return b(new TypeError("You must pass an array to race."))})};A.resolve=d;A.reject=function(a){var b=new this(h);s(b,a);return b};A._setAsap=function(a){C=a};A._asap=C;A.prototype={constructor:A,then:b,"catch":function(a){return this.then(null,a)}};a.Promise=window.Promise||A})(m||(m={}));var U=m.Promise;(function(a){function k(a){return function(f){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];
return a.apply(f,c)}}a.windex={done:!1,JSON:JSON,Array:Array,Object:Object,objectHasOwnProp:k(Object.prototype.hasOwnProperty),setWindowTimeout:k(setTimeout),setWindowInterval:k(setInterval),clearWindowTimeout:k(clearTimeout),clearWindowInterval:k(clearInterval)};a.initWindex=function(g){if(!g.document||a.windex.done)return a.Promise.resolve();var f=g.document.createElement("iframe");f.id="FullStory-iframe";f.className="fs-hide";f.setAttribute("style","display: none;");g=g.document.body||g.document.head||
g.document.documentElement||g.document;try{g.appendChild(f)}catch(c){return a.Promise.resolve()}f.src="about:blank";var b={done:!0,JSON:f.contentWindow.JSON,Array:f.contentWindow.Array,Object:f.contentWindow.Object,objectHasOwnProp:k(f.contentWindow.Object.prototype.hasOwnProperty),setWindowTimeout:k(f.contentWindow.setTimeout),setWindowInterval:k(f.contentWindow.setInterval),clearWindowTimeout:k(f.contentWindow.clearTimeout),clearWindowInterval:k(f.contentWindow.clearInterval)};f.parentNode&&f.parentNode.removeChild(f);
var d,f=new a.Promise(function(a){return d=a});setTimeout(function(){try{(new b.Array).push(0),a.windex=b}catch(c){a.windex.done=!0}d()});return f}})(m||(m={}));(function(a){function k(b){return a.windex.Object.values.call(a.windex.Object,b||{})}function g(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(a[d]);return b}function f(a){e&&window.console&&console.log(a)}function c(b,d){var c=0;try{a.windex.JSON.stringify(b,function(a,b){if(c++>d)throw"break";return"object"!=typeof b?void 0:b})}catch(h){if("break"!=
h)return!0}return!1}function b(c,h,e,f){if(1>h)return 0;var n;c&&c.constructor==Date?n=isNaN(c)?"Invalid Date":c.toUTCString():(n="object"===typeof Node?c instanceof Node:c&&"object"===typeof c&&0<c.nodeType&&"string"===typeof c.nodeName,n=n?d(c):void 0===c?"undefined":"object"!=typeof c||null==c?c:c instanceof Error?c.stack||c.name+": "+c.message:void 0);if(void 0!==n){n=a.windex.JSON.stringify(n);if(void 0===n)return 0;'"'==n[0]&&(n=D(n,h,'..."'));return n.length<=h?(f.tokens.push(n),n.length):
0}if(f.catchCycles){f.opath.splice(e);n=f.opath.lastIndexOf(c);if(-1<n)return c='"'+D("<Cycle to ancestor #"+(e-n-1)+">",h-2)+'"',f.tokens.push(c),c.length;f.opath.push(c)}var l=h,g=function(a){return l>=a.length?(l-=a.length,f.tokens.push(a),!0):!1};n=function(a){","==f.tokens[f.tokens.length-1]?f.tokens[f.tokens.length-1]=a:g(a)};if(2>l)return 0;if(a.isArray(c)){g("[");for(var p=0;p<c.length&&0<l;p++){var k=b(c[p],l-1,e+1,f),l=l-k;if(0==k&&!g("null"))break;g(",")}n("]")}else{g("{");for(var t=Object.keys(c),
p=0;p<t.length&&0<l;p++){var k=t[p],m=c[k];if(!g('"'+k+'":'))break;k=b(m,l-1,e+1,f);if(0==k){f.tokens.pop();break}l-=k;g(",")}n("}")}return Infinity==h?1:h-l}function d(a){if(a.tagName){var b=h(a);return"<"+b+(a.attributes&&a.attributes.type?' type="'+a.attributes.type.value+'"':"")+(a.id?' id="'+a.id+'"':"")+(a.className?' class="'+a.className+'"':"")+">...</"+b+">"}b="";a.data&&a.data.substring&&(b=" "+a.data.substring(0,50)+(50<a.data.length?"...":""));return a.nodeName+b}function h(a){return a.tagName?
"object"==typeof a.tagName?"form":a.tagName.toLowerCase():null}var e=!1;a.BAD_APP_IDS=" 0 1 -1 true false n/a nan undefined null nil the_id_that_you_use_in_your_app_for_this_user".split(" ");a._native_bind=function(a,b){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];return a.bind.apply(a,[b].concat(d))};a._js_bind=function(a,b){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];return function(){var c=Array.prototype.slice.call(arguments);a.call.apply(a,[b].concat(d,c))}};a.bind=
Function.prototype.bind?a._native_bind:a._js_bind;a._native_map=function(a,b,d){return a.map(b,d)};a._js_map=function(a,b,d){for(var c=Array(a.length),h=0;h<a.length;h++)c[h]=b.call(d,a[h],h,a);return c};a.map=Array.prototype.map?a._native_map:a._js_map;a._native_trim=function(a){return a.trim()};a._js_trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};a.trim=String.prototype.trim?a._native_trim:a._js_trim;a._native_filter=function(a,b,d){return a.filter(b,d)};a._js_filter=
function(a,b,d){for(var c=Array(a.length),h=0;h<a.length;h++)c[h]=b.call(d,a[h],h,a);return c};a.filter=Array.prototype.filter?a._native_filter:a._js_filter;var n=function(b){return a.windex.Array.isArray(b)},l=function(b){return"[object Array]"==a.windex.Object.prototype.toString.call(b)};a.isArray=a.windex.Array.isArray?n:l;a.prefix=function(a,b){return 0==a.lastIndexOf(b,0)};a.forIn=function(b,d){for(var c in b)a.windex.objectHasOwnProp(b,c)&&d(b[c],c,b)};a.firstKey=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,
b))return b};a.firstValue=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};a.hasNKeys=function(a,b){var d=0,c;for(c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&++d>b)return!1;return d==b};a.hasMoreThanNKeys=function(a,b){var d=0,c;for(c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&++d>b)return!0;return!1};a._native_values=k;a._js_values=g;a.values=a.windex.Object.values?k:g;a.$entry=function(a,b){var d=function(){try{return a.apply(b||this,arguments)}catch(d){}};
return window.Zone&&window.Zone.root&&"function"==typeof window.Zone.root.wrap?window.Zone.root.wrap(d):d};a.initDebug=function(b){e=a._fs_debug(b)};a.isDebug=function(){return e};a.logIfDebug=f;a.stringify=function(a,d,h){void 0===d&&(d=Infinity);void 0===h&&(h=!0);try{var e={tokens:[],opath:[],catchCycles:h&&c(a,d/4)};b(a,d,0,e);return e.tokens.join("")}catch(f){a="Internal error: unable to determine what JSON error was";try{a=""+f,a=a.replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(n){}return'"'+a+
'"'}};var D=function(a,b,d){void 0===d&&(d="...");return a.length<=b?a:a.length<=d.length||b<=d.length?a.substring(0,b):a.substring(0,b-d.length)+d};a.baseUri=function(a){return"string"==typeof a.baseURI?a.baseURI:(a=a.getElementsByTagName("base")[0])&&a.href?a.href:location.href};a.doctypeString=function(a){a=a.doctype;if(!a)return"";var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"};a.parseJson=function(b){return a.windex.JSON.parse(b)};
a.domainFromHost=function(a){var b=a.indexOf(":");0<=b&&(a=a.slice(0,b));return a};a.isLocalhost=function(a){return"localhost"==a||"127.0.0.1"==a};a.tryGetScreenDims=function(a){var b=0,d=0;if(null==a.screen)return[b,d];b=parseInt(String(a.screen.width));d=parseInt(String(a.screen.height));b=isNaN(b)?0:b;d=isNaN(d)?0:d;return[b,d]};n=function(){function a(){var b=this;this._listeners=[];this._children=[];this._yesCapture=!0;this._noCapture=!1;try{var d=Object.defineProperty({},"passive",{get:function(){b._yesCapture=
{capture:!0,passive:!0};b._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",function(){},d)}catch(c){}}a.prototype.add=function(a,b,d,c){d={target:a,type:b,fn:function(a){try{c(a)}catch(b){f("Error in event listener: "+b)}},options:d?this._yesCapture:this._noCapture,index:this._listeners.length};this._listeners.push(d);a.addEventListener(b,d.fn,d.options);return d};a.prototype.remove=function(a){a.target&&(a.target.removeEventListener(a.type,a.fn,a.options),a.target=null,a.fn=void 0)};
a.prototype.clear=function(){for(var a=0;a<this._listeners.length;a++)this._listeners[a].target&&this.remove(this._listeners[a]);this._listeners=[]};a.prototype.createChild=function(){var b=new a;this._children.push(b);return b};a.prototype.refresh=function(){for(var a=0,b=this._listeners;a<b.length;a++){var d=b[a];d.target&&(d.target.removeEventListener(d.type,d.fn,d.options),d.target.addEventListener(d.type,d.fn,d.options))}a=0;for(b=this._children;a<b.length;a++)b[a].refresh()};return a}();a.DomListeners=
n;var t=function(){function b(a,d){this.target=a;this.propertyName=d;this.attached=this.on=!1;this.native=a[d]}b.prototype.before=function(a){this._before=a;return this};b.prototype.afterAsync=function(a){this._afterAsync=a;return this};b.prototype.afterSync=function(a){this._afterSync=a;return this};b.prototype.disable=function(){this.on=!1;this.target[this.propertyName]==this.shim&&(this.target[this.propertyName]=this.native,this.attached=!1)};b.prototype.enable=function(){this.on=!0;this.attached||
(this.shim||(this.shim=this.makeShim()),this.target[this.propertyName]=this.shim,this.attached=!0)};b.prototype.makeShim=function(){var b=this;return function(){var d={that:this,args:arguments};if(b.on)try{b._before&&b._before.call(this,d)}catch(c){f("Error in hook before "+b.propertyName)}var h=b.native.apply(this,arguments);if(b.on)try{if(b._afterSync&&b._afterSync.call(this,d),b._afterAsync){var e=this;a.windex.setWindowTimeout(window,function(){try{b._afterAsync.call(e,d)}catch(a){f("Error in async hook after "+
b.propertyName)}},0)}}catch(n){f("Error in hook after "+b.propertyName)}return h}};return b}(),p={};a.activateHook=function(a,b){if("function"!=typeof a[b])return null;p[b]=p[b]||[];for(var d,c=0;c<p[b].length;c++)p[b][c].obj==a&&(d=p[b][c].hook);d||(d=new t(a,b),p[b].push({obj:a,hook:d}));d.enable();return d};a.tagName=h;a.parseIdentityCookie=function(b){var d="",c="",h="",e="",n="";if(b){var l=b.split("`");3>l.length?d=b:(h=l[0],e=l[1],d=l[2],5<=l.length&&(n=decodeURIComponent(l[3]),0<=a.BAD_APP_IDS.indexOf(n)&&
(f('ignoring invalid app key "'+n+'" from cookie.'),n="")))}b=d.indexOf(":");-1!=b&&(c=d.slice(b+1),d=d.slice(0,b));return{Host:h,OrgId:e,UserId:d,SessionId:c,AppKey:n}};a.getCookies=function(a){var b={};a=a.cookie.split(";");for(var d=0;d<a.length;d++){var c=a[d].replace(/^\s+|\s+$/g,"").split("=");b[c[0]]||(b[c[0]]=c[1])}return b};a.wait=function(b){return new a.Promise(function(d){a.windex.setWindowTimeout(window,function(){return d()},b)})}})(m||(m={}));(function(a){a.EVENT_MUT_INSERT=2;a.EVENT_MUT_REMOVE=
3;a.EVENT_MUT_ATTR=4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=9;a.EVENT_SCROLL=10;a.EVENT_SCROLL_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE=19;a.EVENT_DOMLOADED=20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=33;a.EVENT_TOUCHCANCEL=
34;a.EVENT_TOUCHMOVE=35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_INNERWIDTH=40;a.EVENT_INNERWIDTH_CURVE=41;a.EVENT_LOG=48;a.EVENT_ERROR=49;a.EVENT_DBL_CLICK=50;a.EVENT_FORM_SUBMIT=51;a.EVENT_WINDOW_FOCUS=52;a.EVENT_WINDOW_BLUR=53;a.EVENT_HEARTBEAT=54;a.EVENT_WATCHED_ELEM=56;a.PerfEntryTiming=0;a.PerfEntryNavigation=1;a.PerfEntryResource=2;a.PerfEntryPaint=3;a.PerfEntryMark=4;a.PerfEntryMeasure=5;a.PerfEntryMemory=6;a.EVENT_PERF_ENTRY=57;a.RecFeaturePerformance=
0;a.RecFeaturePerformanceEntries=1;a.RecFeaturePerformanceMemory=2;a.EVENT_REC_FEAT_SUPPORTED=58;a.EVENT_SELECT=59;a.RecStylesheetOwnerTypeNode=0;a.RecStylesheetOwnerTypeRule=1;a.EVENT_CSSRULE_INSERT=60;a.EVENT_CSSRULE_DELETE=61;a.EVENT_STYLESHEET_FAIL=62;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_SYS_HIGHLIGHT=8194;a.EVENT_SYS_RESOURCEHASH=8195;a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE="navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_TAP=
"tap";a.EVENT_COOKED_FOCUS="focus";a.EVENT_COOKED_CHANGE="change";a.EVENT_COOKED_MOUSE_THRASH="thrash";a.EVENT_FORM_ABANDONED="abandon";a.EVENT_COOKED_ELEM_SEEN="seen";a.isUserActionEvent=function(k){switch(k){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL:case a.EVENT_SCROLL_CURVE:case a.EVENT_NAVIGATE:return!0}return!1};
a.MAX_LOGS_PER_PAGE=1024})(m||(m={}));(function(a){a.HighlightTypeFsId="fsidentity";a.HighlightTypeNewUid="newuid";a.UID_COOKIE="fs_uid";var k=function(){function g(a){void 0===a&&(a=document);this._doc=a;this._cookies={}}g.prototype.initFromCookies=function(f,c){this._cookies=a.getCookies(this._doc);this._cookie=a.parseIdentityCookie(this._cookies[a.UID_COOKIE]);if(this._cookie.Host.replace(/^www\./,"")!=f.replace(/^www\./,"")||this._cookie.OrgId!=c)this._cookie={Host:f,OrgId:c,UserId:"",SessionId:"",
AppKey:""}};g.prototype.initFromParsedCookie=function(a){this._cookie=a};g.prototype.clear=function(){var a=this.host(),c=this.orgId();this._cookie={Host:a,OrgId:c,UserId:"",SessionId:"",AppKey:""};this.write()};g.prototype.host=function(){return this._cookie.Host};g.prototype.orgId=function(){return this._cookie.OrgId};g.prototype.userId=function(){return this._cookie.UserId};g.prototype.sessionId=function(){return this._cookie.SessionId};g.prototype.appKey=function(){return this._cookie.AppKey};
g.prototype.cookieData=function(){return this._cookie};g.prototype.cookies=function(){return this._cookies};g.prototype.setCookie=function(a,c){var b=a+"="+c,b=this._domain?b+("; domain=."+encodeURIComponent(this._domain)):b+"; domain=";this._doc.cookie=b+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"};g.prototype.setIds=function(f,c,b,d){a.isLocalhost(c)&&(c="");f=a._fs_cookie_domain(f);"string"==typeof f&&(c=f);this._domain=c;this._cookie.UserId=b;this._cookie.SessionId=d;this.write()};g.prototype.clearAppId=
function(){if(!this._cookie.AppKey)return!1;this._cookie.AppKey="";this.write();return!0};g.prototype.setAppId=function(a){this._cookie.AppKey=a;this.write()};g.prototype.encode=function(){var a=this._cookie.Host+"`"+this._cookie.OrgId+"`"+this._cookie.UserId+":"+this._cookie.SessionId;this._cookie.AppKey&&(a+="`"+encodeURIComponent(this._cookie.AppKey)+"`");return a};g.prototype.write=function(){null!=this._domain&&this.setCookie(a.UID_COOKIE,this.encode())};return g}();a.Identity=k})(m||(m={}));
(function(a){var k=function(){function g(a){this._identity=a;this.AccountSystemVars={acctId:"str",displayName:"str",website:"str"};this.UserSystemVars={uid:"str",displayName:"str",email:"str"};this.VarTypes={str:function(a){return"string"==typeof a},bool:function(a){return"boolean"==typeof a},"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},real:function(a){return"number"==typeof a},date:function(a){return a?!isNaN(a.constructor===Date?a:new Date(a)):!1}}}g.prototype.identity=function(){return this._identity};
g.prototype.transformValidateAppId=function(f,c){"number"==typeof f&&f===f>>0&&(a.logIfDebug("Expected appId of type 'string' instead got value: "+f+" of type: "+typeof f),f=""+f);if("string"!=typeof f)return a.logIfDebug("blocking FS.identify API call; uid value ("+f+") must be a string"),[void 0,a.HighlightTypeFsId];var b=f.trim();if(0<=a.BAD_APP_IDS.indexOf(b.toLowerCase()))return a.logIfDebug("blocking FS.identify API call; uid value ("+f+") is illegal"),[void 0,a.HighlightTypeFsId];var d=void 0;
c._cookie.AppKey&&c._cookie.AppKey!=b&&(a.logIfDebug("user re-identified; existing uid ("+c._cookie.AppKey+") does not match provided uid ("+b+")"),d=a.HighlightTypeNewUid);return[b,d]};g.prototype.api=function(f,c){var b=!1,d=[];switch(f){case "account":d=d.concat(this.setvar_api("acct",this.AccountSystemVars,c));break;case "user":if("object"!=typeof c)a.logIfDebug("Expected argument of type 'object' instead got type: '"+typeof c+"', value: "+a.stringify(c));else if("uid"in c){var h=c.uid;if(!1===
h)this._identity.clearAppId()&&(b=!0),delete c.uid;else{var e=this.transformValidateAppId(h,this._identity),h=e[0],e=e[1];if(!h){switch(e){case a.HighlightTypeFsId:d.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:[a.HighlightTypeFsId,c.uid+""]});break;case void 0:break;default:a.logIfDebug("unexpected failReason returned from setAppId: "+e)}return[d,!1]}c.uid=h;this._identity.setAppId(c.uid);e==a.HighlightTypeNewUid&&(b=!0)}}d=d.concat(this.setvar_api("user",this.UserSystemVars,c));break;default:a.logIfDebug('invalid operation "'+
f+'"; only "account" and "user" are supported at present')}return[d,b]};g.prototype.setvar_api=function(f,c,b){var d=[],h={},e;for(e in b)if(b.hasOwnProperty(e)){var n=b[e];a.logIfDebug("set-var('"+f+"'): \""+e+'" = '+a.stringify(n));var l=typeof n;if("object"!==l||n&&n.constructor==Date){var g,k;if(e in c)g=e,k=c[e];else{k=e.split("_");if(2!=k.length){a.logIfDebug('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]');d.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,
Args:["varname",f+":"+e]});continue}-1!=e.indexOf(" ")?(g=e.replace(/ /g,""),d.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",f+":"+e]}),a.logIfDebug("Warning: variable '"+e+"' has spaces in it, which is disallowed. Converted name to '"+g+"'.")):g=e;k=k[1]}k in this.VarTypes?this.VarTypes[k](n)?("str"==k&&(n=n.trim()),"date"==k&&(n=this.toIsoString(n)),h[g]=n):(a.logIfDebug("illegal value "+a.stringify(n)+" for type "+k),"number"===l?l=0==n-Math.floor(n)?"integer":"real":"object"==l&&(null!=
n&&n.constructor==Date)&&(l=isNaN(n)?"invalid date":"date"),d.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",f+":"+e,l]})):(a.logIfDebug('invalid type "'+k+'"'),d.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",f+":"+e]}))}else n instanceof Array&&(l="array"),d.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",f+":"+e,l+" (unsupported)"]})}d.push({When:0,Kind:a.EVENT_SYS_SETVAR,Args:[f,a.stringify(h)]});return d};g.prototype.toIsoString=function(a){return(a.constructor===Date?
a:new Date(a)).toISOString()};return g}();a.Vars=k})(m||(m={}));var S;(function(a){var k=/(?:[^\\](?:\\\\)*)/.source;a.CSS_URL=RegExp('url\\(\\s*"(.*?'+k+")\"\\s*\\)|url\\(\\s*'(.*?"+k+")'\\s*\\)|url\\((.*?"+k+")\\)","g");a.QUOTES=/\"|'/g;a.HOVER=/\:hover/g;a.FOCUS=/\:focus/g;a.MEDIA_QUERY=/(@media.*?{)/g;a.DOMAIN=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;a.DOMAIN_PART=/^[a-zA-Z0-9-:]{1,61}$/;a.IPv4_PART=/^[0-9]{1,3}$/;a.IPv6_PART=/^[0-9a-f]{0,4}$/;a.PLAYBACK_URL_PARAMS=/.*\?Base=(.*)&Url=(.*)/;
a.EMAIL=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.IMAGE_FILENAME=/\.(jpe?g|png|svg|gif|bmp)$/;a.ATTR_SELECTOR=/\[.*\]/g;a.SVG_NS=/svg\:/g})(S||(S={}));(function(a){var k=function(){function a(c,b){this.parent=c;this.combinator=b;this.classes={};this.attrs={};this.attrMatch={}}a.prototype.cssEscapeIdent=function(a){var b=function(a){return-1!="[]:./\\()@#%^&*'\" ".indexOf(a)?"\\"+a:"\\"+
a.charCodeAt(0).toString(16)+" "};return"-"==a?"\\-":"-"==a[0]?"-"+a.slice(1).replace(/([^0-9a-zA-Z-_])/g,b):a.replace(/[^0-9a-zA-Z-_:]/g,b)};a.prototype.cssEscapeString=function(a){return'"'+a.replace(/[\x01-\x1f\"\\]/g,function(a){return'"'==a||"\\"==a?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "})+'"'};a.prototype.serialize=function(){var a=this.combinator?this.combinator:"";this.tag&&(a+="*"==this.tag?this.tag:this.cssEscapeIdent(this.tag));this.id&&(a+="#"+this.cssEscapeIdent(this.id));var b=
Object.keys(this.classes);b.sort();for(var d=0;d<b.length;d++)a+="."+this.cssEscapeIdent(b[d]);for(var h in this.attrs)a=""==this.attrMatch[h]?a+("["+this.cssEscapeIdent(h)+"]"):a+("["+this.cssEscapeIdent(h)+this.attrMatch[h]+this.cssEscapeString(this.attrs[h])+"]");return a};return a}();a.SelectorRule=k;var g=function(){function a(c){this.rules=c}a.parse=function(c,b,d){void 0===b&&(b=null);c=c.trim();var h=new k(null,null),e=0,n=!1,l=function(){throw"Invalid selector";},g=function(){m=c[++e];if("\n"==
m||null==m)throw l();if(m.match(/[0-9a-fA-F]/)){var a="";do a+=m,m=c[++e];while(m&&m.match(/[0-9a-fA-F]/));m&&m.match(/[\s]/)&&e++;return String.fromCharCode(parseInt(a,16))}e++;return m},t=function(a){for(var b=e,d="",h;null!=(h=c[e]);)if("\\"==h)d+=g();else if(h.match(a?/[a-zA-Z0-9_:\-]/:/[a-zA-Z0-9_\-]/)||128<h.charCodeAt(0))d+=h,e++;else break;if(b==e)throw l();return d},p=function(){for(;null!=c[e]&&c[e].match(/\s/);)e++},q=function(){n=!0;e++;var a=t().toLowerCase();try{var d;p();var f=c[e],
k="=";if("*"==f||"|"==f||"^"==f||"$"==f||"~"==f)k=f+"=",e++;if(b&&!b[k])throw l();if("="!=c[e])throw l();e++;p();d=k}catch(q){if(b&&!b["[]"]||"Invalid selector"!=q)throw q;if("]"!=c[e])throw l();e++;h.attrs[a]=h.attrMatch[a]="";return}m=c[e];'"'==m||"'"==m?(f=m,e++):f="]";for(k="";(m=c[e])!=f;){if(null==m)throw l();if("\\"==m)k+=g();else{if("]"==f&&('"'==m||"'"==m))throw l();k+=m;e++}}e++;"]"!=f&&"]"==c[e]&&e++;h.attrs[a]=k;h.attrMatch[a]=d},r=function(){if(!n)throw l();n=!1;p();var a=c[e];">"==a||
"+"==a||"~"==a?(e++,p()):a=" ";h=new k(h,a);if(b&&!b[a])throw l();};if(0==c.indexOf("//"))throw l();for(var s=0,e=0;e<c.length;){if(s++>2*c.length)throw console.log("Likely caught in an infinite loop while parsing "+c),"Internal error, infinite loop";var m=c[e];switch(m){case "#":n=!0;e++;h.id=t();break;case "*":if(n)throw l();n=!0;h.tag="*";if(b&&!b["*"])throw l();e++;break;case ".":n=!0;e++;h.classes[t()]=!0;break;case "[":q();break;case " ":case ">":case "+":case "~":r();break;case ":":throw l();
default:if(n)throw l();n=!0;h.tag=t(d).toLowerCase()}}if(!n)throw l();return new a(h)};a.prototype.serialize=function(){for(var a=null,b=this.rules;b;b=b.parent)a=a?b.serialize()+a:b.serialize();return a};return a}();a.Selector=g})(m||(m={}));(function(a){function k(a){var d={};if(!a)return d;if(a.classList)for(var c=0;c<a.classList.length;++c)d[a.classList[c]]=!0;else if(a.className)for(a=(a.getAttribute("class")||"").split(" "),c=0;c<a.length;++c)d[a[c].trim()]=!0;return d}a.WatchKindNYI="nyi";
a.WatchKindBlocked="blocked";a.WatchKindHide="hide";a.WatchKindWatch="watch";var g=function(){function b(a,b){this._parent=a;this._rule=b}b.prototype.parent=function(){return this._parent};b.prototype.matches=function(d,c){if(!d||this._rule.tag&&a.tagName(d)!=this._rule.tag||this._rule.id&&d.id!=this._rule.id)return!1;for(var e in this._rule.classes)if(!(e in c))return!1;for(var f in this._rule.attrs)if(e=d.getAttribute(f),null==e||!b.attrPredicates[this._rule.attrMatch[f]](e,this._rule.attrs[f]))return!1;
return this._parent?this._parent.matches(d.parentElement,k(d.parentElement)):!0};b.attrPredicates={"":function(a,b){return!0},"=":function(a,b){return a==b},"*=":function(a,b){return-1<a.indexOf(b)},"^=":function(a,b){return 0==a.lastIndexOf(b,0)},"$=":function(a,b){return a.indexOf(b,a.length-b.length)+b.length==a.length},"~=":function(a,b){return-1<a.split(/\s+/).indexOf(b)},"|=":function(a,b){return-1<a.split("-").indexOf(b)}};return b}();a.WatchRuleElem=g;var f=function(){function b(b){this.kind=
b.Kind;this.selector=a.Selector.parse(b.Selector,{">":!0,"=":!0,"[]":!0,"*=":!0,"^=":!0,"$=":!0,"~=":!0,"|=":!0});var c=function(a){return new g(a.parent?c(a.parent):null,a)};this.rules=c(this.selector.rules)}b.isComment=function(a){return!!a.match(/^\s*\/\//)};b.prototype.serialize=function(){return this.selector.serialize()};return b}();a.WatchRule=f;var c=function(){function b(){this._rules=[];this._predicateRules=[];this.rawRules=[]}b.prototype.isWatched=function(a){for(var b=0;b<this._predicateRules.length;++b)if(this._predicateRules[b].Selector(a))return this._predicateRules[b].Kind;
for(var c=k(a),b=0;b<this._rules.length;++b)if(this._rules[b].rules.matches(a,c))return this._rules[b].kind;return null};b.prototype.addRule=function(b){try{return f.isComment(b.Selector)||""==a.trim(b.Selector)||(this._rules.push(new f(b)),this.rawRules.push(b)),!0}catch(c){return a.sendToBugsnag(c,"error"),!1}};b.prototype.addPredicateRule=function(a){this._predicateRules.push(a)};b.prototype.mungeWatchedStyle=function(b,c){var e=b.getBoundingClientRect(),f=Math.floor(e.width),e=Math.floor(e.height);
if("object"==a.tagName(b))for(var l=b.children,g=0;g<l.length;g++){var k=l[g];if("embed"==a.tagName(k)){l=k.getBoundingClientRect();f=Math.max(f,Math.floor(l.width));e=Math.max(e,Math.floor(l.height));break}}l="";null!=c&&(l=c.trim());0<l.length&&";"!=l.charAt(l.length-1)&&(l+=";");if(0!=f||0!=e)l+="width:"+f+"px;height:"+e+"px;";return l};return b}();a.Watcher=c})(m||(m={}));(function(a){a.MutationProcessingInterval=250;a.CurveSamplingInterval=142;a.UploadInterval=5E3;a.HeartbeatInitial=4E3;a.HeartbeatMax=
256E3;a.PageInactivityTimeout=18E5;a.BackoffMax=3E5;a.ScrollSampleInterval=a.MutationProcessingInterval/5;a.InactivityThreshold=4E3})(m||(m={}));(function(a){var k=function(){function a(c,b,d){this._ctx=c;this._q=b;this._valueIndices=d;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&this._q.push(a);this._evts.push(a)};a.prototype.finish=function(a,b){var d=this._evts.length;if(1>=d)return!1;for(var h=this._evts[0].When,e=this._evts[d-1].When,f=0;f<this._valueIndices.length;++f){var l=
this._valueIndices[f],g=this._evts[0].Args[l],k=(this._evts[1].When-h)/(e-h),p=(this._evts[1].Args[l]-g)/k,q=this._evts[d-1].Args[l],k=(e-this._evts[d-2].When)/(e-h);b.push(g,q,p,(q-this._evts[d-2].Args[l])/k)}this._evts[0].Kind=a;this._evts[0].Args=b;return!0};a.prototype.evts=function(){return this._evts};return a}(),g=function(){function f(a){this._ctx=a;this._gotInitialScroll=!1}f.prototype.processQueue=function(c){if(0==c.length)return c;for(var b=this._ctx.now(),d=[],h=new k(this._ctx,d,[0,
1]),e={},f={},l,g=0;g<c.length;++g){var m=c[g];switch(m.Kind){case a.EVENT_MOUSEMOVE:h.add(m);break;case a.EVENT_TOUCHMOVE:var p=m.Args[0];p in e||(e[p]=new k(this._ctx,d,[1,2]));e[p].add(m);break;case a.EVENT_SCROLL:p=m.Args[0];p in f||(f[p]=new k(this._ctx,d,[1,2]));f[p].add(m);break;case a.EVENT_INNERWIDTH:l||(l=new k(this._ctx,d,[0]));l.add(m);break;default:d.push(m)}}h.finish(a.EVENT_MOUSEMOVE_CURVE,[b])&&(c=h.evts(),h=c[c.length-1].Args,2<h.length&&h[2]&&c[0].Args.push(h[2]));for(p in f)c=parseInt(p),
f[c].finish(a.EVENT_SCROLL_CURVE,[b,c]);for(p in e)c=parseInt(p),e[c].finish(a.EVENT_TOUCHMOVE_CURVE,[b,c]);l&&l.finish(a.EVENT_INNERWIDTH_CURVE,[b]);return d};return f}();a.EventProcessor=g})(m||(m={}));(function(a){a.Node_ELEMENT_NODE=1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=
11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=3;a.XHR_DONE=4})(m||(m={}));(function(a){function k(f,c){var b=Math.min(a.BackoffMax,5E3*Math.pow(2,f));return c?b+0.25*Math.random()*b:b}var g=function(){function f(){}f.prototype.postPromise=function(c,b,d,h){var e=this;return new a.Promise(function(a,f){e.post(c,b,d,h,a,f)})};return f}();a.HttpPoster=g;g=function(f){function c(){return null!==f&&f.apply(this,arguments)||this}N(c,f);c.prototype.post=
function(b,d,c,e,f,l){d="//"+d+c;var g=!1,k=new XMLHttpRequest;if("withCredentials"in k)k.onreadystatechange=function(){if(k.readyState==a.XHR_DONE&&!g){g=!0;try{200==k.status?f(k.responseText):l&&l(k.status)}catch(b){a.sendToBugsnag(b,"error")}}},k.open("POST",b+d,!0),k.withCredentials=!0,"function"!=typeof e.append&&k.setRequestHeader("Content-Type","text/plain"),k.send(e);else{var p=new XDomainRequest;p.onload=function(){f(p.responseText)};p.onerror=function(){l&&l("Not Found"==p.responseText?
404:500)};p.onprogress=function(){};p.open("POST",d);p.send(e)}};c.prototype.sendBeacon=function(a,d,c,e){return"function"==typeof navigator.sendBeacon?(navigator.sendBeacon(a+"//"+d+c,e),!0):!1};c.prototype.exponentialBackoffMs=function(a,d){return k(a,d)};return c}(g);a.XHRPoster=g;a.exponentialBackoffMs=k;a.isErrorFatal=function(a){return 400<=a||202==a?!0:!1};a.gceHost=function(f){return a.isLocalhost(a.domainFromHost(f))?f:0==f.indexOf("www.")||0==f.indexOf("app.")?"rs."+f.slice(4):"rs."+f}})(m||
(m={}));(function(a){function k(b,d){return a.stringify({__fs:[b,d?d:""]})}function g(a,d,c,e,f,l,g){a="/rec/bundle?OrgId="+a+"&UserId="+d+"&SessionId="+c+"&PageId="+e+"&Seq="+f.Seq;l&&(a+="&PageStartTime="+l);g&&(a+="&DeltaT="+g);return a}var f=function(){function b(a,b){void 0===b&&(b=new c);this._wnd=a;this._messagePoster=b}b.prototype.enqueueEvents=function(b){this._messagePoster.postMessage(this._wnd.parent,a.FS_IFRAME_EVENTS,b)};b.prototype.startPipeline=function(a){};b.prototype.stopPipeline=
function(){};b.prototype.flush=function(){};b.prototype.singSwanSong=function(){};return b}();a.PostMessageEventTransport=f;var c=function(){function b(){}b.prototype.postMessage=function(b,c,e){var f;try{f=a._fs_transport(b)}catch(l){}f?f.send(c,a.stringify(e)):b.postMessage(k(c,e),"*")};return b}();a.PostMessagePoster=c;a.formatPostMessageData=k;f=function(){function b(b,c,e,f,l){void 0===e&&(e=a.RealTicker);void 0===f&&(f=a.RealTimeout);void 0===l&&(l=new a.XHRPoster);var g=this;this._ctx=b;this._onShutdown=
c;this._tickerFactory=e;this._poster=l;this._backoffTime=this._backoffRetries=this._byteCount=0;this._bundleSeq=1;this._lastPostTime=0;this._largePageSize=16E6;this._outgoingEventQueue=[];this._bundleQueue=[];this._hibernating=!1;this._heartbeatInterval=0;this._bundleHost=a.gceHost(b.getHost());this._protocol=b.getProtocol();this._identity=b.getIdentity();this._lastBundleTime=b.wallTime();this._uploadTicker=new this._tickerFactory(a.UploadInterval);this._swanSong=new a.SwanSong(b,this,this._identity,
f);this._heartbeatTimeout=new f(function(){g._outgoingEventQueue.push({Kind:a.EVENT_HEARTBEAT,When:g._ctx.now(),Args:[]});g._heartbeatInterval*=2;g._heartbeatInterval>a.HeartbeatMax&&(g._heartbeatInterval=a.HeartbeatMax);g._heartbeatTimeout.start(g._heartbeatInterval)});this._hibernationTimeout=new f(function(){g._outgoingEventQueue.push({Kind:a.EVENT_UNLOAD,When:g._ctx.now(),Args:[]});g.singSwanSong();g.stopPipeline();g._hibernating=!0},a.PageInactivityTimeout)}b.prototype.protocol=function(){return this._protocol};
b.prototype.enqueueEvents=function(b){if(this._hibernating)for(var c=0;c<b.length;c++){var e=b[c];if(a.isUserActionEvent(e.Kind)){this._ctx.splitPage();break}}else{for(c=0;c<b.length;c++)if(e=b[c],a.isUserActionEvent(e.Kind)){this._hibernationTimeout.start();this._heartbeatInterval=a.HeartbeatInitial;this._heartbeatTimeout.start(this._heartbeatInterval);break}(f=this._outgoingEventQueue).push.apply(f,b);var f}};b.prototype.startPipeline=function(b){var c=this;this._pageId=b;this.enqueueAndSendBundle();
this._uploadTicker.start(function(){c.enqueueAndSendBundle()});this._heartbeatInterval=a.HeartbeatInitial;this._heartbeatTimeout.start(this._heartbeatInterval);this._hibernationTimeout.start()};b.prototype.stopPipeline=function(){this._uploadTicker.stop();this._outgoingEventQueue=[];this._bundleQueue=[];this._hibernationTimeout.cancel();this._heartbeatTimeout.cancel()};b.prototype.flush=function(){this.maybeSendNextBundle()};b.prototype.singSwanSong=function(){if(!this._hibernating&&(0<this._outgoingEventQueue.length&&
this.enqueueNextBundle(!0),0<this._bundleQueue.length||this._pendingBundle)){var a=this._bundleQueue.concat();this._pendingBundle&&a.unshift(this._pendingBundle);this._swanSong.sing(this._pageId,a,this._lastBundleTime)}};b.prototype.sendSwanSongBundle=function(a,b,c,f,l,k,m,p,q){a=g(a,b,c,f,l,k,m);this.post(a,l,p,q)};b.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0==this._outgoingEventQueue.length?this.maybeSendNextBundle():this.enqueueNextBundle()};
b.prototype.enqueueNextBundle=function(b){void 0===b&&(b=!1);var c={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[];this._bundleQueue.push(c);b&&this._poster.sendBeacon(this._protocol,this._bundleHost,this.bundleUrl(c),a.stringify(c))||this.maybeSendNextBundle()};b.prototype.maybeSendNextBundle=function(){this._pageId&&(!this._pendingBundle&&0!=this._bundleQueue.length)&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())};
b.prototype._sendPendingBundle=function(){var b=this,c=this._ctx.wallTime();if(!(c<this._backoffTime)){var e=this._pendingBundle;e&&(this._pendingBundleFailed=!1,this._lastPostTime=this._lastBundleTime=c,this.sendBundle(e,function(c){a.logIfDebug("Sent bundle "+e.Seq+" with "+e.Evts.length+" events");b._pendingBundle=null;b._backoffTime=0;b._backoffRetries=0;b._ctx.wallTime()-b._lastPostTime>a.UploadInterval&&b.maybeSendNextBundle()},function(c){a.logIfDebug("Failed to send events.");a.isErrorFatal(c)?
b._onShutdown():(b._pendingBundleFailed=!0,b._backoffTime=b._lastPostTime+b._poster.exponentialBackoffMs(b._backoffRetries++,!1))}))}};b.prototype.sendBundle=function(a,b,c){this.post(this.bundleUrl(a),a,b,c)};b.prototype.bundleUrl=function(a){return g(this._identity.orgId(),this._identity.userId(),this._identity.sessionId(),this._pageId,a)};b.prototype.post=function(b,c,e,f){var g="";null!=c&&(g=a.stringify(c),this._byteCount+=g.length,a.logIfDebug("total bytes written: "+this._byteCount));this._poster.post(this._protocol,
this._bundleHost,b,g,e,f);this._byteCount>this._largePageSize&&16<this._bundleSeq&&(a.logIfDebug("Splitting large page of size: "+this._byteCount.toString()),a.sendToBugsnag(Error("Large page of "+this._byteCount+" bytes was sent to: "+b),"info"),this._ctx.splitPage(),this._byteCount=0)};return b}();a.HttpEventTransport=f})(m||(m={}));(function(a){var k=function(){function a(){this.dict={idx:-1,map:{}};this.nodeCount=1;this.startIdx=0}a.prototype.encode=function(f){function c(){h?1<l?e.push([h.idx,
l]):e.push(h.idx):e.push(b)}if(0==f.length)return[];var b=f[0],d,h=Object.prototype.hasOwnProperty.call(this.dict.map,b)?this.dict.map[b]:null,e=[],n,l=1;for(d=1;d<f.length;d++)if(n=f[d],h&&Object.prototype.hasOwnProperty.call(h.map,n))l++,b=n,h=h.map[n];else{c();var k=this.startIdx+d-l;null==h&&this.nodeCount<a.MAX_NODES&&(h={idx:k,map:{}},this.dict.map[b]=h,this.nodeCount++);h&&this.nodeCount<a.MAX_NODES&&(h.map[n]={idx:k,map:{}},this.nodeCount++);l=1;b=n;h=Object.prototype.hasOwnProperty.call(this.dict.map,
n)?this.dict.map[n]:null}c();this.startIdx+=f.length;return e};a.MAX_NODES=1E4;return a}();a.LZJGWEncoder=k;k=function(){function a(){this._seq=[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var c=this._seq.length,b=0;b<a.length;++b){var d=a[b];switch(typeof d){case "string":this._seq.push(d);break;case "number":this._seq.push(this._seq[d]);break;case "object":if(null==d){this._seq.push("");break}for(var h=0;h<d[1];h++)this._seq.push(this._seq[d[0]+h])}}return c};
return a}();a.LZJGWDecoder=k})(m||(m={}));(function(a){var k=function(){function g(f,c,b,d){void 0===d&&(d=a.RealTimeout);this._ctx=f;this._transport=c;this._identity=b;this._timeoutFactory=d;this._recover()}g.prototype.sing=function(f,c,b){a.logIfDebug("Saving "+c.length+" bundles in swan-song.");f={OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),PageId:f,Bundles:c,PageStartTime:this._ctx.startTime(),LastBundleTime:b};try{localStorage.singSwanSong=
a.stringify(f)}catch(d){}};g.prototype._recover=function(){try{if("singSwanSong"in localStorage){var f=localStorage.singSwanSong;delete localStorage.singSwanSong;var c=a.parseJson(f);c.Bundles&&c.UserId&&c.SessionId&&c.PageId?(c.OrgId||(c.OrgId=this._identity.orgId()),0<c.Bundles.length&&(a.logIfDebug("Sending "+c.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(c.OrgId,c.UserId,c.SessionId,c.PageId,c.PageStartTime,c.Bundles,c.LastBundleTime))):a.logIfDebug("Malformed swan song found. Ignoring it.")}}catch(b){a.logIfDebug("Error recovering swan-song: "+
b)}};g.prototype.sendSwanSongBundles=function(f,c,b,d,h,e,n,g){var k=this;void 0===g&&(g=0);var m=null;a.isArray(e)&&(0!==e.length&&void 0!==e[0])&&(1==e.length&&(m=this._ctx.wallTime()-(n||0)),this._transport.sendSwanSongBundle(f,c,b,d,e[0],h,m,function(g){a.logIfDebug("Sent "+e[0].Evts.length+" trailing events from last session as Seq "+e[0].Seq);e.shift();0<e.length?k.sendSwanSongBundles(f,c,b,d,h,e,n):a.logIfDebug("Done with prior page swan song")},function(p){a.isErrorFatal(p)?a.logIfDebug("Fatal error while sending events, giving up"):
(a.logIfDebug("Failed to send events from last session, will retry while on this page"),k._lastSwanSongRetryTimeout=(new k._timeoutFactory(k.sendSwanSongBundles,a.exponentialBackoffMs(g,!0),k,f,c,b,d,h,e,n,g+1)).start())}))};return g}();a.SwanSong=k})(m||(m={}));(function(a){var k=function(){function f(a){this._interval=a;this._handle=-1}f.prototype.start=function(c){-1==this._handle&&(this._handle=a.windex.setWindowInterval(window,function(){try{c()}catch(b){a.sendToBugsnag(b,"error")}},this._interval))};
f.prototype.stop=function(){-1!=this._handle&&(a.windex.clearWindowInterval(window,this._handle),this._handle=-1)};return f}();a.RealTicker=k;var g=function(){function f(c,b,d){void 0===b&&(b=0);for(var h=[],e=3;e<arguments.length;e++)h[e-3]=arguments[e];this.delay=b;this.timer=-1;this.handler=function(){try{c.apply(void 0===d?window:d,h)}catch(b){a.sendToBugsnag(b,"error")}}}f.prototype.start=function(c){void 0===c&&(c=this.delay);this.delay=c;a.windex.clearWindowTimeout(window,this.timer);this.timer=
a.windex.setWindowTimeout(window,this.handler,this.delay);return this};f.prototype.cancel=function(){a.windex.clearWindowTimeout(window,this.timer);this.timer=-1};return f}();a.RealTimeout=g;g=function(){function a(c,b,d){this.limit=c;this.per=b;this.breaker=d;this.remaining=0;this.ticker=new k(b);this.open()}a.prototype.guard=function(a){var b=this;return function(){if(0==b.remaining)b.breaker(),b.remaining--;else if(!(0>b.remaining))return b.remaining--,a.apply(this,arguments)}};a.prototype.close=
function(){this.ticker.stop();return this};a.prototype.open=function(){var a=this;this.remaining=this.limit;this.ticker.start(function(){a.remaining=a.limit});return this};return a}();a.Throttle=g})(m||(m={}));(function(a){var k=function(){function g(f,c,b,d){void 0===b&&(b=function(){return[]});void 0===d&&(d=a.RealTicker);this._ctx=f;this._transport=c;this._gatherExternalEvents=b;this._tickerFactory=d;this._recordingDisabled=!1;this._lastWhen=-1;this._gotUnload=!1;this._eventQueue=[];this._sampleCurvesTicker=
new this._tickerFactory(a.CurveSamplingInterval);this._processMutationsTicker=new this._tickerFactory(a.MutationProcessingInterval);this._processor=new a.EventProcessor(f)}g.prototype.startPipeline=function(a,c,b){var d=this;void 0===c&&(c=0);void 0===b&&(b=[]);this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=c,this._parentIds=b,this.processEvents(),this._processMutationsTicker.start(function(){d.processEvents()}),this._sampleCurvesTicker.start(function(){d.processEvents(!0)}),
this._transport.startPipeline(a))};g.prototype.enqueue=function(a,c){this.enqueueAt(this._ctx.now(),a,c)};g.prototype.enqueueAt=function(a,c,b){this._recordingDisabled||(a<=this._lastWhen&&(a=this._lastWhen+1),this._lastWhen=a,this._eventQueue.push({When:a,Kind:c,Args:b}))};g.prototype.enqueueFirst=function(a,c){0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:a,Args:c}):this.enqueue(a,c)};g.prototype.addUnload=function(){this._gotUnload||(this._gotUnload=!0,
this.enqueue(a.EVENT_UNLOAD,[]),this.singSwanSong())};g.prototype.shutdown=function(){this._flush();this.addUnload();this._flush();this._recordingDisabled=!0;this.stopPipeline()};g.prototype._flush=function(){this.processEvents();this._transport.flush()};g.prototype.prequeue=function(a,c){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:a,Args:c})};g.prototype.appendToQueue=function(a){this._eventQueue=this._eventQueue.concat(a)};g.prototype.singSwanSong=function(){this._recordingDisabled||
(this.processEvents(),this._transport.singSwanSong())};g.prototype.rebaseIframe=function(a){for(var c=0,b=this._eventQueue.length;c<b;c++){var d=this._eventQueue[c],h=d.When+this._ctx.startTime()-a;0>h&&(h=0);d.When=h}};g.prototype.processEvents=function(a){if(this._pipelineStarted){var c=this._eventQueue;this._eventQueue=[];c=this._processor.processQueue(c);a||(c=c.concat(this._gatherExternalEvents()));this.ensureFrameIds(c);0!=c.length&&this._transport.enqueueEvents(c)}};g.prototype.ensureFrameIds=
function(a){if(this._frameId)for(var c=this._parentIds,b=c&&0<c.length,d=0;d<a.length;++d){var h=a[d];h.FId||(h.FId=this._frameId);b&&!h.PIds&&(h.PIds=c)}};g.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())};return g}();a.EventQueue=k})(m||(m={}));(function(a){var k=function(){function g(a,c,b){this._queue=a;this._wnd=c;this._overflow=this._enabled=!1;this._total=0;this._hooks=
[];this._listeners=b.createChild()}g.prototype.enable=function(){var f=this;this._listeners.add(this._wnd,"error",!0,function(a){return f.addError(a)});this._listeners.add(this._wnd,"unhandledrejection",!0,function(a){f.addLog("error",["Uncaught (in promise)",a.reason])});if(!this._enabled)if(this._enabled=!0,this._wnd.console)for(var c=function(d){var c=a.activateHook(b._wnd.console,d);if(!c)return"continue";c.before(function(a){return f.addLog(d,a.args)});b._hooks.push(c)},b=this,d=0,h=["log","info",
"warn","error"];d<h.length;d++)c(h[d]);else this.addLog("log",["NOTE: Log messages cannot be captured on IE9"])};g.prototype.disable=function(){this._listeners.clear();if(this._enabled){this._enabled=!1;for(var a;a=this._hooks.pop();)a.disable()}};g.prototype.addLog=function(f,c){if(this.checkOverflow()){for(var b=[f],d=0;d<c.length;++d)b.push(a.stringify(c[d],1E3));this._queue.enqueue(a.EVENT_LOG,b)}};g.prototype.addError=function(f){if(this.checkOverflow()){var c=f.message,b=f.filename;f=f.lineno;
if(c||b||f)"object"==typeof c&&(c=a.stringify(c,1E3)),"object"==typeof b&&(b=a.stringify(b,100)),"object"==typeof f&&(f=-1),this._queue.enqueue(a.EVENT_ERROR,[c,b,f])}};g.prototype.checkOverflow=function(){if(this._overflow)return!1;if(this._total==a.MAX_LOGS_PER_PAGE)return this._queue.enqueue(a.EVENT_LOG,["warn",g.OVERFLOW_MSG]),this._overflow=!0,!1;this._total++;return!0};g.OVERFLOW_MSG='"[received more than '+a.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"';return g}();a.ConsoleWatcher=
k})(m||(m={}));(function(a){function k(d,c){var e=Object.getOwnPropertyDescriptor(d.prototype,c);e&&Object.defineProperty(d.prototype,c,{set:function(d){var c=this,h=a.fsid(c);h&&(b&&b.values[h]!=d)&&a.windex.setWindowTimeout(window,function(){if(b)b.onChange(c,d)},0);return e.set.call(this,d)},get:function(){return e.get&&e.get.call(this)}})}function g(a){switch(a.type){case "checkbox":case "radio":return""+a.checked;default:return(a=a.value)||(a=""),""+a}}var f=function(){function d(a,d){this._onchange=
a;this._checkElem=d;this._fallback=!1;this._elems={};this.values={};b=this}d.prototype.hookEvents=function(){var a;(a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&a.set?(c||(k(HTMLInputElement,"value"),k(HTMLInputElement,"checked"),k(HTMLSelectElement,"value"),k(HTMLTextAreaElement,"value"),c=!0),a=!0):a=!1;a||(this._fallback=!0)};d.prototype.addInput=function(b){var d=a.fsid(b);this._elems[d]=b;this.values[d]=g(b);a:switch(b.type){case "checkbox":case "radio":d=b.checked!=
b.hasAttribute("checked");break a;default:var d=b.value||"",c=b.getAttribute("value")||"",d=d!=c}d&&this._onchange(b)};d.prototype.onChange=function(b,d){void 0===d&&(d=g(b));var c=a.fsid(b);(b=this._elems[c])&&d!=this.values[c]&&(this._onchange(b),this.values[c]=d)};d.prototype.tick=function(){for(var a in this._elems)if(!this._checkElem(this._elems[a]))delete this._elems[a],delete this.values[a];else if(this._fallback){var b=this._elems[a],d=g(b);d!=this.values[a]&&(this._onchange(b),this.values[a]=
d)}};d.prototype.shutdown=function(){b=null};d.prototype._usingFallback=function(){return this._fallback};d.prototype._trackingElem=function(a){return!!this._elems[a]};return d}();a.InputWatcher=f;var c=!1,b;a.valueOfInputishElem=g})(m||(m={}));(function(a){function k(a){return"_fswatch"in a}function g(a){return a._fswatch}function f(a,b){a._fswatch=b}function c(b,d){if(k(b.node))for(var c=b,e=b.parent;e;e=e.parent){e.watchedChildSet||(e.watchedChildSet={});if(c.watchedChildSet)for(var h in c.watchedChildSet)delete e.watchedChildSet[h];
e.watchedChildSet[c.id]=c;if(a.hasNKeys(e.watchedChildSet,2))c=e;else if(a.hasMoreThanNKeys(e.watchedChildSet,2))break}}function b(b){return b?a._mirrors[b._fs]:null}function d(a){return a&&a._fs||0}function h(a,b,d){e(b);d=d||a.lastChild;b.parent=a;if(b.prev=d)c=[b,d.next],d.next=c[0],b.next=c[1];null==b.prev?a.child=b:b.prev.next=b;null==b.next?a.lastChild=b:b.next.prev=b;var c}function e(b){if(b.parent){if(a.hasMoreThanNKeys(b.watchedChildSet,0)||k(b.node))for(var d=b.watchedChildSet&&a.hasMoreThanNKeys(b.watchedChildSet,
1)||k(b.node)?b.id:a.firstKey(b.watchedChildSet),c=d?b.parent:null;c&&c.watchedChildSet&&c.watchedChildSet[d];){delete c.watchedChildSet[d];if(a.hasNKeys(c.watchedChildSet,1)){for(var d=c.id,e=a.firstValue(c.watchedChildSet),c=c.parent;c&&c.watchedChildSet&&c.watchedChildSet[d];)delete c.watchedChildSet[d],c.watchedChildSet[e.id]=e,c=c.parent;break}c=c.parent}b.parent.child==b&&(b.parent.child=b.next);b.parent.lastChild==b&&(b.parent.lastChild=b.prev);b.prev&&(b.prev.next=b.next);b.next&&(b.next.prev=
b.prev);b.parent=b.prev=b.next=null;delete a._mirrors[b.id];b.node._fs==b.id&&(b.node._fs=0);b.id=0;b.child&&n(b.child)}}function n(b){for(b=[b];0<b.length&&1E4>b.length;){var d=b.pop();delete a._mirrors[d.id];d.node._fs==d.id&&(d.node._fs=0);d.id=0;d.next&&b.push(d.next);d.child&&b.push(d.child)}a.assert(1E4>b.length,"clearIds is fast")}function l(a,b){if(a.attributes&&0<a.attributes.length)for(var d=0;d<a.attributes.length;d++){var c=a.attributes[d];b(c.name.toLowerCase(),c.value)}}function m(a,
b,d,c){if("class"==b&&0>d.indexOf("_fs_block_"))d+=" _fs_block_"+g(a);else if("type"==b||"value"==b||"checked"==b||"src"==b||"data"==b||"alt"==b)return null;return d}a.isWatched=k;a.watchKind=g;a.setWatched=f;a._mirrors={};a.mirrorFor=b;a.fsid=d;a.fsidIfNotBlocked=function(a){return k(a)?0:d(a)};a.removeMirror=e;a.clearIds=n;var t=function(){function d(a){this._watcher=a;this._curId=1}d.prototype.curId=function(){return this._curId};d.prototype.tokenizeNode=function(a,d,c,e,h){var f=this._curId;try{var g=
b(a),n=b(d);a=[];this.tokeNode(g,n,c,a,e,h);return a}catch(l){return this._curId=f,[]}};d.prototype.tokeNode=function(b,d,e,f,g,n){if("SCRIPT"==e.nodeName||e.nodeType==a.Node_COMMENT_NODE)return null;var k={id:this._curId++,node:e};a._mirrors[k.id]=k;e._fs=k.id;b&&h(b,k,d);if(e.nodeType==a.Node_DOCUMENT_TYPE_NODE)return f.push("<!DOCTYPE",":name",e.name,":publicId",e.publicId||"",":systemId",e.systemId||""),k;b=e.nodeName;"http://www.w3.org/2000/svg"==e.namespaceURI&&(b="svg:"+b);f.push("<"+b);try{var p=
this.processWatchedElem(e,f);if(p&&(c(k,p),p!=a.WatchKindWatch))return k;g&&g(e);l(e,function(a,b){f.push(":"+a);f.push(b);n&&n(e,a,b)});if(e.firstChild){f.push("[");var p=null,m;for(m=e.firstChild;m;m=m.nextSibling){var D=this.tokeNode(k,p,m,f,g,n);D&&(p=D)}f.push("]")}e.nodeType==a.Node_TEXT_NODE&&f.push(e.textContent||"")}catch(t){}return k};d.prototype.processWatchedElem=function(b,d){var c=this;if(b.nodeType==a.Node_ELEMENT_NODE&&this._watcher){var e=this._watcher.isWatched(b);if(e){f(b,e);if(e!=
a.WatchKindWatch){var h,g=!1;l(b,function(a,e){var f=m(b,a,e,c._watcher);"class"==a?h=!0:"style"==a&&(g=!0);null!=f&&(d.push(":"+a),d.push(f))});h||(d.push(":class"),d.push("_fs_block_"+e));g||(d.push(":style"),d.push(this._watcher.mungeWatchedStyle(b,"")))}return e}}return null};return d}();a.NodeEncoder=t;a.rewriteBlockedAttribute=m})(m||(m={}));(function(a){function k(){q=!1;var a=r;r=[];a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var d=a.takeRecords();g(a);d.length&&
(a.callback_(d,a),b=!0)});b&&k()}function g(a){a.nodes_.forEach(function(b){(b=l.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function f(a,b){for(var d=a;d;d=d.parentNode){var c=l.get(d);if(c)for(var e=0;e<c.length;e++){var h=c[e],f=h.options;(d===a||f.subtree)&&(f=b(f))&&h.enqueue(f)}}}function c(a){this.callback_=a;this.nodes_=[];this.records_=[];this.uid_=++s}function b(a){if(x)return x;var b=w,d=new v(b.type,b.target);d.addedNodes=b.addedNodes.slice();d.removedNodes=
b.removedNodes.slice();d.previousSibling=b.previousSibling;d.nextSibling=b.nextSibling;d.attributeName=b.attributeName;d.attributeNamespace=b.attributeNamespace;d.oldValue=b.oldValue;x=d;x.oldValue=a;return x}function d(a,b,d){this.observer=a;this.target=b;this.options=d;this.transientObservedNodes=[]}var h=navigator.userAgent,h=-1<h.indexOf("MSIE ")||-1<h.indexOf("Trident/");a.MutationObserver=h?c:window.MutationObserver||window.WebKitMutationObserver||c;var e=Object.defineProperty,n=Date.now()%
1E9,l=new (window.WeakMap||function(){var a=function(){this.name="__st"+(1E9*Math.random()>>>0)+(n++ +"__")};a.prototype={set:function(a,b){var d=a[this.name];d&&d[0]===a?d[1]=b:e(a,this.name,{value:[a,b],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0}};return a}()),m=window.setImmediate||window.msSetImmediate;if(!m){var t=[],p=String(Math.random());window.addEventListener("message",function(a){a.data===p&&(a=t,t=[],a.forEach(function(a){a()}))});m=function(a){for(var b=
1;b<arguments.length;b++);t.push(a);window.postMessage(p,"*");return 0}}var q=!1,r=[],s=0;c.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var c=l.get(a);c||l.set(a,c=[]);for(var e,h=0;h<c.length;h++)if(c[h].observer===this){e=c[h];e.removeListeners();
e.options=b;break}e||(e=new d(this,a,b),c.push(e),this.nodes_.push(a));e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=l.get(a);for(var b=0;b<a.length;b++){var d=a[b];if(d.observer===this){d.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var v=function(){return function(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=
this.nextSibling=this.previousSibling=null}}(),w,x;d.prototype={enqueue:function(a){var b=this.observer.records_,d=b.length;if(0<b.length){var c=b[d-1];c=c===a?c:!x||c!==x&&c!==w?null:x;if(c){b[d-1]=c;return}}else r.push(this.observer),q||(q=!0,m(k));b[d]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);b.childList&&
a.addEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},
addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=l.get(a);b||l.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=l.get(a);for(var b=0;b<a.length;b++)if(a[b]===this){a.splice(b,1);break}},this)},handleEvent:function(a){switch(a.type){case "DOMAttrModified":var d=a.attrName,c=a.relatedNode.namespaceURI,e=a.target,
h=w=new v("attributes",e);h.attributeName=d;h.attributeNamespace=c;var g=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;f(e,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(d)||-1!==a.attributeFilter.indexOf(c)))return a.attributeOldValue?b(g):h});break;case "DOMCharacterDataModified":e=a.target;h=w=new v("characterData",e);g=a.prevValue;f(e,function(a){if(a.characterData)return a.characterDataOldValue?b(g):h});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);
case "DOMNodeInserted":var e=a.relatedNode,n=a.target,l;"DOMNodeInserted"===a.type?(a=[n],l=[]):(a=[],l=[n]);var k=n.previousSibling,n=n.nextSibling,h=w=new v("childList",e);h.addedNodes=a;h.removedNodes=l;h.previousSibling=k;h.nextSibling=n;f(e,function(a){if(a.childList)return h})}w=x=void 0}}})(m||(m={}));(function(a){var k=function(){function g(f,c,b,d,h){void 0===b&&(b=function(){});void 0===d&&(d=function(){});void 0===h&&(h=function(){});this._ctx=f;this._watcher=c;this._nodeVisitor=b;this._beforeRemove=
d;this._attrVisitor=h;this._sentDomSnapshot=!1;this._records=[];this._watchedDims={};this._wnd=f.getWindow();this._encoder=new a.NodeEncoder(c)}g.prototype.hookMutations=function(f){var c=this;void 0===f&&(f=this._wnd.document);this._root=f;this._sentDomSnapshot=!1;this._lz=new a.LZJGWEncoder;this._observer=new a.MutationObserver(function(a){c._records=c._records.concat(a)});this._observer.observe(f,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};
g.prototype.shutdown=function(){this._observer&&this._observer.disconnect();var f=a.mirrorFor(this._root);f&&a.clearIds(f);this._records=[]};g.prototype.processMutations=function(){if(!this._root)return[];var f=this._ctx.now(),c=[];this._sentDomSnapshot||(this.genInsert(f,c,null,this._root,null),this.resizeRelatedWatchedElements(f,c,this._root),this._sentDomSnapshot=!0);if(0==this._records.length)return c;var b={},d={};this.processRecords(f,c,d,b);for(var h in d){var e=h.split(":");c.push({Kind:a.EVENT_MUT_ATTR,
When:f,Args:[parseInt(e[0]),e[1],d[h]]})}for(h in b)c.push({Kind:a.EVENT_MUT_TEXT,When:f,Args:[parseInt(h),b[h]]});this._records=[];return c};g.prototype.processRecords=function(f,c,b,d){for(var h={},e={},g=0;g<this._records.length;++g)try{var l=this._records[g],k=a.fsid(l.target);if(k)switch(h[k]=l.target,l.type){case "childList":if(0<l.removedNodes.length)for(var m=0;m<l.removedNodes.length;++m){var p=a.mirrorFor(l.removedNodes[m]);p&&p.id&&p.parent==a.mirrorFor(l.target)&&p.next==a.mirrorFor(l.nextSibling)&&
this.genRemove(f,c,p)}k&&(e[k]=l.target);break;case "characterData":var q=l.target.textContent;l.oldValue!=q&&(a.isWatched(l.target)||(d[k]=q));break;case "attributes":var r=l.attributeName||"",s=r.toLowerCase();if(l.target.hasAttribute(r)){var v=l.target.getAttribute(r);l.oldValue!=v&&(v=this.rewriteAttr(l.target,s,v||""),this._attrVisitor(l.target,s,v||""),null!==v&&(b[k+":"+s]=v))}else b[k+":"+s]=null}}catch(w){}for(var x in e)b=e[x],(d=a.mirrorFor(b))&&d.id&&this.diff(f,c,b,d.child,b.firstChild);
for(x in h)b=h[x],this.resizeRelatedWatchedElements(f,c,b)};g.prototype.diff=function(f,c,b,d,h){for(var e=[];d&&h;){var g=a.mirrorFor(h);a.fsid(h)?g&&d.id==g.id?(d=d.next,h=h.nextSibling):(e.push({remove:d}),d=d.next):(e.push({insert:[b,h,d.node]}),h=h.nextSibling)}for(;d;d=d.next)e.push({remove:d});for(;h;h=h.nextSibling)e.push({insert:[b,h,null]});for(b=0;b<e.length;b++)d=e[b],d.insert?this.genInsert(f,c,d.insert[0],d.insert[1],d.insert[2]):d.remove&&this.genRemove(f,c,d.remove)};g.prototype.resizeRelatedWatchedElements=
function(f,c,b){var d=a.mirrorFor(b);if(d)for(var h=[d],d=0;h.length&&1E3>++d;){var e=h.pop();b=a.watchKind(e.node);null!=b?this.addPlaceholderResize(f,c,e.node,b):e.watchedChildSet&&a.forIn(e.watchedChildSet,function(a){h.push(a)})}else{for(d=b;d&&!a.fsid(d);)d=d.parentNode;d&&(b=a.watchKind(d),null!=b&&this.addPlaceholderResize(f,c,d,b))}};g.prototype.addPlaceholderResize=function(f,c,b,d){try{var h=b.getBoundingClientRect(),e=Math.floor(h.width),g=Math.floor(h.height),l=a.fsid(b),k=this._watchedDims[l];
k&&k.w==e&&k.h==g||(d==a.WatchKindWatch?(b=0!=e&&0!=g,(!!k&&0!=k.w&&0!=k.h)!=b&&c.push({When:f,Kind:a.EVENT_WATCHED_ELEM,Args:[l,b]})):c.push({When:f,Kind:a.EVENT_PLACEHOLDER_SIZE,Args:[l,e,g]}),this._watchedDims[l]={w:e,h:g})}catch(m){}};g.prototype.genInsert=function(f,c,b,d,h){var e=this;if(b&&a.isWatched(b))return null;var g=a.fsid(b)||-1,l=a.fsid(h)||-1;b=this._encoder.tokenizeNode(b,h,d,function(a){e._nodeVisitor(f,a)},function(a,b,d){e._attrVisitor(a,b,d)});0<b.length&&c.push({When:f,Kind:a.EVENT_MUT_INSERT,
Args:[g,l,this._lz.encode(b)]})};g.prototype.genRemove=function(f,c,b){var d=b.id;this._beforeRemove(b);a.removeMirror(b);if(0<c.length&&(b=c[c.length-1],b.Kind==a.EVENT_MUT_REMOVE)){b.Args.push(d);return}c.push({When:f,Kind:a.EVENT_MUT_REMOVE,Args:[d]})};g.prototype.rewriteAttr=function(f,c,b){return a.isWatched(f)?a.rewriteBlockedAttribute(f,c,b,this._watcher):b};return g}();a.MutationWatcher=k})(m||(m={}));(function(a){function k(a){a=String(a);for(var b,d,c=0,e=B,h=[];a.charAt(c|0)||(e="=",c%
1);h.push(e.charAt(63&b>>8-8*(c%1)))){d=a.charCodeAt(c+=0.75);if(255<d)throw new C("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");b=b<<8|d}return h.join("")}var g=function(){for(var a=[],b=0;23>b;b++)a.push("url()blo:@impot}; \t\n\r'\"".charCodeAt(b));return a}(),f=g[0],c=g[1],b=g[2],d=g[3],h=g[4],e=g[5],b=g[6],n=g[7],l=g[8],m=g[9],t=g[10],p=g[11],q=g[12],n=g[13],r=g[15],s=g[16],v=g[18],w=g[19],x=g[20],Q=g[21],H=g[22],z=[t,p,q,n,c,g[14],0,c,b,d,0,b,n,e,
l,0],u={};u[g[17]]=!0;u[v]=!0;u[w]=!0;u[x]=!0;u[Q]=!0;u[H]=!0;for(var I in u)u.hasOwnProperty(I);var M=function(){function a(){this.reset()}a.prototype.getSubBlobs=function(){for(var a=[],b=0;b<this.subBlobs.length;b+=2)a.push({url:"blob:"+this.subBlobs[b],isCss:this.subBlobs[b+1]});return a};a.prototype.reset=function(){this.hash=[2166136261,2166136261,2166136261,2166136261];this.state=99;this.subBlobs=[];this.currentUrl="";this.urlIsCss=!1};a.prototype.write=function(a){for(var b=0;b<a.length;b++){var d=
b%4;this.hash[d]^=a[b];this.hash[d]+=(this.hash[d]<<1)+(this.hash[d]<<4)+(this.hash[d]<<7)+(this.hash[d]<<8)+(this.hash[d]<<24)}};a.prototype.writeAscii=function(a){for(var b=0;b<a.length;b++){var d=b%4;this.hash[d]^=a.charCodeAt(b);this.hash[d]+=(this.hash[d]<<1)+(this.hash[d]<<4)+(this.hash[d]<<7)+(this.hash[d]<<8)+(this.hash[d]<<24)}};a.prototype.writeCss=function(a){for(var b=0;b<a.length;b++){var d=a[b];switch(this.state){case 99:f==d?this.state=7:m==d&&(this.state=0);break;case 10:u[d]||(e==
d?this.state=11:(this.urlIsCss=!1,this.state=99));break;case 6:this.urlIsCss=!0;u[d]||(f==d?this.state=7:e==d?this.state=11:(this.urlIsCss=!1,this.state=99));break;case 15:if(u[d]||h==d||r==d||s==d)this.subBlobs.push(this.currentUrl,this.urlIsCss),this.urlIsCss=!1,this.currentUrl="",this.state=99;else{this.currentUrl+=String.fromCharCode(d);continue}break;default:d==z[this.state]?this.state++:(this.urlIsCss=!1,this.state=99)}var c=b%4;this.hash[c]^=d;this.hash[c]+=(this.hash[c]<<1)+(this.hash[c]<<
4)+(this.hash[c]<<7)+(this.hash[c]<<8)+(this.hash[c]<<24)}};a.prototype.sum=function(){var a=("00000000"+(this.hash[0]>>>0).toString(16)).slice(-8)+("00000000"+(this.hash[1]>>>0).toString(16)).slice(-8)+("00000000"+(this.hash[2]>>>0).toString(16)).slice(-8)+("00000000"+(this.hash[3]>>>0).toString(16)).slice(-8);return O(String.fromCharCode.apply(null,a.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))};return a}();a._FSNV=M;a.hashNonBlocking=function(b,d,c,
e){void 0===e&&(e=new M);return y(this,void 0,void 0,function(){var h,f,g,l,n;return J(this,function(k){switch(k.label){case 0:h=c?e.writeCss:e.write,f=b.now(),g=0,k.label=1;case 1:return g<d.byteLength?50<b.now()-f?[4,a.wait(75)]:[3,3]:[3,5];case 2:k.sent(),f=b.now(),k.label=3;case 3:l=Math.min(5096,d.byteLength-g),n=new Uint8Array(d,g,l),h.call(e,n),k.label=4;case 4:return g+=5096,[3,1];case 5:return[2,{hash:e.sum(),hasher:e}]}})})};var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
C=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}N(b,a);return b}(Error),O=window.btoa||k;a._jsbtoa=k})(m||(m={}));(function(a){function k(c){var b,d=new a.Promise(function(a){return b=a});if(!a.assert(a.prefix(c,"blob:"),'Blob url must start with "blob:"'))return b(null),d;var h=new XMLHttpRequest;if("string"!=typeof h.responseType)return b(null),d;h.open("GET",c);h.responseType="blob";h.onerror=function(){b(null)};h.onload=function(){if(200!=h.status)a.logIfDebug("Error loading blob resource "+
c),b(null);else{var d=h.response;if(d.size>g)a.logIfDebug("Size of blob resource "+c+" exceeds limit of "+g),b(null);else{var f=new FileReader;f.readAsArrayBuffer(d);f.onload=function(){b({data:f.result,contentType:d.type,blob:d})}}}};h.send();return d}var g=2097152,f=function(){function c(b,d,c,e,f){void 0===c&&(c=new a.XHRPoster);void 0===e&&(e=window.FormData);void 0===f&&(f=a.RealTimeout);this.ctx=b;this.queue=d;this.poster=c;this.FormDataCtr=e;this.Timeout=f;this.started={};this.byUrl={};this.byHash=
{};this.batchReady=!1;this.existsBatch=[];this.host=a.gceHost(this.ctx.getHost())}c.prototype.init=function(){this.FormDataCtr&&this.main().catch(function(b){a.sendToBugsnag(b,"error")})};c.prototype.main=function(){return y(this,void 0,void 0,function(){var b,d,c,e,f,g,k,m,p,q,r,s,v,w,x,y,H,z;return J(this,function(u){switch(u.label){case 0:return[4,this.getBatch()];case 1:b=u.sent();d=a.stringify(a.map(b,function(a){return a.hash}));c={};for(e=0;e<b.length;e++)f=b[e],c[f.hash]=f;g=this.ctx.getOrgId();
k="/rec/newResources?OrgId="+g;u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.poster.postPromise(this.ctx.getProtocol(),this.host,k,d)];case 3:return m=u.sent(),[3,5];case 4:return p=u.sent(),a.logIfDebug("/rec/newResources failed with status "+p),[3,0];case 5:try{q=JSON.parse(m)}catch(I){return a.sendToBugsnag("Error parsing /rec/newResources response","error"),[3,0]}r=0;s=q;u.label=6;case 6:if(!(r<s.length))return[3,11];v=s[r];w=c[v];x=w.url;y=w.blob;H=w.childHashes;if(null==y)return a.sendToBugsnag("Tried to re-upload a resource",
"warning"),[3,10];z=new this.FormDataCtr;z.append("orgId",g);z.append("baseUrl",x);z.append("fsnvHash",v);z.append("childHashes",a.stringify(H));z.append("contents",y,"blob");w.blob=null;u.label=7;case 7:return u.trys.push([7,9,,10]),[4,this.poster.postPromise(this.ctx.getProtocol(),this.host,"/rec/uploadResource",z)];case 8:return u.sent(),[3,10];case 9:return u.sent(),a.logIfDebug("Server error uploading resource"),[3,10];case 10:return r++,[3,6];case 11:return[3,0];case 12:return[2]}})})};c.prototype.getBatch=
function(){var b=this,d,c=new a.Promise(function(a){return d=a}),e=function(){b.popBatch=null;b.batchReady=!1;var a=b.existsBatch;b.existsBatch=[];d(a)};this.batchReady?e():this.popBatch=e;return c};c.prototype.uploadBlob=function(b,d){void 0===d&&(d=!1);return y(this,void 0,void 0,function(){var c=this,e,f,g,k,m;return J(this,function(p){switch(p.label){case 0:if(0!=b.lastIndexOf("blob:",0)||!this.FormDataCtr||this.started[b])return[2];this.started[b]=!0;return[4,this.hashResourceTree(b,d)];case 1:e=
p.sent();if(!e)return[2];f=0==this.existsBatch.length;this.existsBatch.push(e);g=0;for(k=a.values(e.childHashes);g<k.length;g++)m=k[g],this.existsBatch.push(this.byHash[m]);f&&(new this.Timeout(function(){c.batchReady=!0;c.popBatch&&c.popBatch()})).start();return[2]}})})};c.prototype.hashResourceTree=function(b,d){return y(this,void 0,void 0,function(){var c,e,f,g,m,t,p,q,r,s,v;return J(this,function(w){switch(w.label){case 0:return this.byUrl[b]?[2,this.byUrl[b]]:[4,k(b)];case 1:return(c=w.sent())?
[4,a.hashNonBlocking(this.ctx,c.data,d)]:[2,null];case 2:e=w.sent().hasher,f={},g=e.getSubBlobs(),m=0,t=g,w.label=3;case 3:if(!(m<t.length))return[3,6];p=t[m];q=p.url;r=p.isCss;return[4,this.hashResourceTree(q,r)];case 4:s=w.sent();if(!s)return[3,5];f[q]=s.hash;e.writeAscii(s.hash);w.label=5;case 5:return m++,[3,3];case 6:return v={url:b,hash:e.sum(),blob:c.blob,contentType:c.contentType,childHashes:f},this.byUrl[b]=v,this.byHash[v.hash]=v,this.queue.enqueue(a.EVENT_SYS_RESOURCEHASH,["url",b,v.hash]),
[2,v]}})})};return c}();a.ResourceUploader=f})(m||(m={}));(function(a){var k="navigationStart unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),g="name startTime duration initiatorType redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd unloadEventStart unloadEventEnd domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd type redirectCount decodedBodySize encodedBodySize transferSize".split(" "),
f=["name","startTime","duration"],c=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"],b=function(){function b(d){this._queue=d;this._memorySupported=this._getEntriesSupported=this._timingSupported=this._perfSupported=!1;this._lastUsedJSHeapSize=this._lastPerfCount=0;window.performance&&(this._perfSupported=!0,"timing"in window.performance&&(this._timingSupported=!0),"getEntries"in window.performance&&(this._getEntriesSupported=!0),"memory"in window.performance&&(this._memorySupported=!0),this._queue.enqueue(a.EVENT_REC_FEAT_SUPPORTED,
[a.RecFeaturePerformance,this._timingSupported,a.RecFeaturePerformanceEntries,this._getEntriesSupported,a.RecFeaturePerformanceMemory,this._memorySupported]),this.checkMemory())}b.prototype.onLoad=function(){this._timingSupported&&this.recordTiming(performance.timing)};b.prototype.tick=function(){this.checkForNewEntries();this.checkMemory()};b.prototype.checkMemory=function(){if(this._memorySupported){var b=performance.memory,d=b.usedJSHeapSize-this._lastUsedJSHeapSize;if(0==this._lastUsedJSHeapSize||
0.2<Math.abs(d/this._lastUsedJSHeapSize))this.addPerfEvent(a.PerfEntryMemory,b,c),this._lastUsedJSHeapSize=b.usedJSHeapSize}};b.prototype.checkForNewEntries=function(){if(this._perfSupported&&this._getEntriesSupported){var a=performance.getEntries();if(a.length>this._lastPerfCount){for(;this._lastPerfCount<a.length;this._lastPerfCount++){var b=a[this._lastPerfCount];switch(b.entryType){case "navigation":this.recordNavigation(b);break;case "resource":this.recordResource(b);break;case "paint":this.recordPaint(b);
break;case "measure":this.recordMeasure(b);break;case "mark":this.recordMark(b)}}this._lastPerfCount=a.length}}};b.prototype.recordTiming=function(b){this.addPerfEvent(a.PerfEntryTiming,b,k)};b.prototype.recordNavigation=function(b){this.addPerfEvent(a.PerfEntryNavigation,b,g)};b.prototype.recordResource=function(a){};b.prototype.recordPaint=function(b){this.addPerfEvent(a.PerfEntryPaint,b,f)};b.prototype.recordMark=function(b){this.addPerfEvent(a.PerfEntryMark,b,f)};b.prototype.recordMeasure=function(b){this.addPerfEvent(a.PerfEntryMeasure,
b,f)};b.prototype.addPerfEvent=function(b,d,c){b=[b];for(var f=0;f<c.length;f++){var g=d[c[f]];void 0===g&&(g=-1);b.push(g)}this._queue.enqueue(a.EVENT_PERF_ENTRY,b)};return b}();a.PerfWatcher=b})(m||(m={}));(function(a){var k=function(){function g(f,c){var b=this;this.ctx=f;this.queue=c;this.hooks=[];var d=g;this.throttle=new a.Throttle(d.ThrottleMax,d.ThrottleInterval,function(){return setTimeout(function(){b.queue.enqueue(a.EVENT_STYLESHEET_FAIL,[]);b.stop()})});this.addInsert=this.throttle.guard(this.addInsert);
this.addDelete=this.throttle.guard(this.addDelete)}g.prototype.start=function(){var f=this;this.throttle.open();var c=this.ctx.getWindow();if(c.CSSStyleSheet){var c=c.CSSStyleSheet.prototype,b;if(b=a.activateHook(c,"insertRule"))b.afterSync(function(a){f.addInsert(a.that,a.args[0],a.args[1])}),this.hooks.push(b);if(b=a.activateHook(c,"deleteRule"))b.afterSync(function(a){f.addDelete(a.that,a.args[0])}),this.hooks.push(b)}};g.prototype.addInsert=function(f,c,b){(f=a.fsid(f.ownerNode))&&"string"==typeof c&&
(c=[f,c],"number"==typeof b&&c.push(b),this.queue.enqueue(a.EVENT_CSSRULE_INSERT,c))};g.prototype.addDelete=function(f,c){var b=a.fsid(f.ownerNode);b&&"number"==typeof c&&this.queue.enqueue(a.EVENT_CSSRULE_DELETE,[b,c])};g.prototype.stop=function(){this.throttle.close();for(var a=0,c=this.hooks;a<c.length;a++)c[a].disable();this.hooks=[]};g.ThrottleMax=1024;g.ThrottleInterval=1E4;return g}();a.StyleSheetWatcher=k})(m||(m={}));(function(a){function k(a,b){if(!a.firstChild)return[a,b];a=a.firstChild;
for(var d=0;d<b-1&&a.nextSibling;d++)a=a.nextSibling;return[a,0]}function g(c,b,d){var h=a.tagName(c);if(("img"==h||"embed"==h)&&"src"==b||("use"==h||"image"==h)&&"href"==b||"object"==h&&"data"==b)return[[d],!1];var e;return"link"==h&&"href"==b&&(e=c.getAttribute("rel"))&&-1<e.indexOf("stylesheet")?[[d],!0]:"srcset"!=b||"img"!=h&&"source"!=h?[[],!1]:null!=d.match(/^\s*$/)?[[],!1]:[a.map(d.split(","),function(b){return a.trim(b).split(/\s+/)[0]}),!1]}var f=function(){function c(b,d,c,e,f,k,m){void 0===
m&&(m=new a.ResourceUploader(b,d));var t=this;this._ctx=b;this._queue=d;this._watcher=c;this._onFrameCreated=f;this._beforeFrameRemoved=k;this._resourceUploader=m;this._clientHeight=this._clientWidth=this._curWindowScrollY=this._curWindowScrollX=-1;this._curInnerWidth=0;this._curSelection=[];this._scrollTimeouts={};this._initialized=this._uploadResources=this._quirks=!1;this._wnd=b.getWindow();this._doc=this._wnd.document;this._loc=this._wnd.location;this._hst=this._wnd.history;this._listeners=e.createChild();
this._quirks="BackCompat"==this._doc.compatMode;this._currentUrl=this._loc.href;this._inputWatcher=new a.InputWatcher(function(a){t.addChangeElem(a)},function(b){return!!a.fsid(b)});this._perfWatcher=new a.PerfWatcher(d);this._styleSheetWatcher=new a.StyleSheetWatcher(b,d);this._mutWatcher=new a.MutationWatcher(b,c,function(a,b){t.visitNode(a,b)},function(b){var d=b.node;if("iframe"==a.tagName(b.node))t._beforeFrameRemoved(b.node);else if("function"==typeof d.getElementsByTagName)for(b=d.getElementsByTagName("iframe"),
d=0;d<b.length;d++)t._beforeFrameRemoved(b[d])},function(a,b,d){if(t._uploadResources)for(d=g(a,b,d),a=d[1],b=0,d=d[0];b<d.length;b++){var c=d[b];0==c.lastIndexOf("blob:",0)&&t._resourceUploader.uploadBlob(c,a)}})}c.prototype.watchEvents=function(){var b=this;this._mutWatcher.hookMutations();this._inputWatcher.hookEvents();this._styleSheetWatcher.start();this._listeners.add(this._wnd,"mousemove",!0,function(a){b.addMouseMove(a)});this._listeners.add(this._wnd,"mousedown",!0,function(a){b.addMouseDown(a)});
this._listeners.add(this._wnd,"mouseup",!0,function(a){b.addMouseUp(a)});this._listeners.add(this._wnd,"keydown",!0,function(a){b.addKeyDown(a)});this._listeners.add(this._wnd,"keyup",!0,function(a){b.addKeyUp(a)});this._listeners.add(this._wnd,"click",!0,function(a){b.addClick(a)});this._listeners.add(this._wnd,"dblclick",!0,function(a){b.addDblClick(a)});this._listeners.add(this._wnd,"focus",!0,function(a){b.addFocus(a)});this._listeners.add(this._wnd,"blur",!0,function(a){b.addBlur(a)});this._listeners.add(this._wnd,
"change",!0,function(a){b.addChange(a)});this._listeners.add(this._wnd,"touchstart",!0,function(d){b.addTouchEvent(d,a.EVENT_TOUCHSTART);b.addWindowScroll()});this._listeners.add(this._wnd,"touchend",!0,function(d){b.addTouchEvent(d,a.EVENT_TOUCHEND);b.addWindowScroll()});this._listeners.add(this._wnd,"touchmove",!0,function(d){b.addTouchEvent(d,a.EVENT_TOUCHMOVE);b.addWindowScroll()});this._listeners.add(this._wnd,"touchcancel",!0,function(d){b.addTouchEvent(d,a.EVENT_TOUCHCANCEL)});this._listeners.add(this._wnd,
"play",!0,function(d){b.addPlayPauseEvent(d,a.EVENT_PLAY)});this._listeners.add(this._wnd,"pause",!0,function(d){b.addPlayPauseEvent(d,a.EVENT_PAUSE)});this._listeners.add(this._wnd,"scroll",!1,function(a){b.addWindowScroll()});this._listeners.add(this._wnd,"resize",!1,function(a){b.addResize()});this._listeners.add(this._wnd,"submit",!1,function(a){b.addFormSubmit(a)});this._listeners.add(this._wnd,"focus",!1,function(a){b.addWindowFocus(a)});this._listeners.add(this._wnd,"blur",!1,function(a){b.addWindowBlur(a)});
this._listeners.add(this._wnd,"popstate",!1,function(){b.addNavigate()});this._listeners.add(this._wnd,"selectstart",!0,function(a){b.addSelection()});this._listeners.add(this._doc,"selectionchange",!0,function(a){b.addSelection()});(this._pushHook=a.activateHook(this._hst,"pushState"))&&this._pushHook.afterSync(function(){return b.addNavigate()});(this._replaceHook=a.activateHook(this._hst,"replaceState"))&&this._replaceHook.afterSync(function(){return b.addNavigate()});this._initialized=!0};c.prototype.initResourceUploading=
function(){this._resourceUploader.init();this._uploadResources=!0};c.prototype.onDomLoad=function(){this.addDomLoaded();this.addResize()};c.prototype.onLoad=function(){this._perfWatcher.onLoad();this.addLoad();this.addResize()};c.prototype.bundleEvents=function(){this._inputWatcher.tick();this._perfWatcher.tick();this.addWindowInnerWidth();return this._mutWatcher.processMutations()};c.prototype.shutdown=function(){this._initialized&&(this._initialized=!1,this._listeners.clear(),this._pushHook&&this._pushHook.disable(),
this._replaceHook&&this._replaceHook.disable(),this._inputWatcher.shutdown(),this._mutWatcher.shutdown())};c.prototype.docElem=function(){return this._doc.documentElement};c.prototype.visitNode=function(b,d){var c=this;switch(d.nodeName){case "HTML":this._docElScrollListener&&this._listeners.remove(this._docElScrollListener);this._docElScrollListener=this._listeners.add(d,"scroll",!0,function(a){c.addScroll(a.target)});break;case "BODY":this.addResize();this.addWindowScroll();a.windex.setWindowTimeout(window,
function(){return c.addSelection()},0);break;case "INPUT":case "TEXTAREA":case "SELECT":this._inputWatcher.addInput(d);break;case "FRAME":case "IFRAME":this._onFrameCreated(d);break;case "VIDEO":case "AUDIO":d.paused||this.addPlayPauseEventById(a.fsid(d),a.EVENT_PLAY)}"number"!=typeof d.scrollLeft||0==d.scrollLeft&&0==d.scrollTop||this.addScroll(d)};c.prototype.addMouseMove=function(b){b=a.fsid(b.target)?[b.clientX,b.clientY,a.fsid(b.target)]:[b.clientX,b.clientY];this._queue.enqueue(a.EVENT_MOUSEMOVE,
b)};c.prototype.addMouseDown=function(b){this._queue.enqueue(a.EVENT_MOUSEDOWN,[b.clientX,b.clientY])};c.prototype.addMouseUp=function(b){this._queue.enqueue(a.EVENT_MOUSEUP,[b.clientX,b.clientY])};c.prototype.addTouchEvent=function(a,d){if(void 0!==a.changedTouches)for(var c=0;c<a.changedTouches.length;++c){var e=a.changedTouches[c];isNaN(parseInt(e.identifier))&&(e.identifier=0);this._queue.enqueue(d,[e.identifier,e.clientX,e.clientY])}};c.prototype.addPlayPauseEvent=function(b,d){var c=a.fsid(b.target);
c&&this.addPlayPauseEventById(c,d)};c.prototype.addPlayPauseEventById=function(a,d){this._queue.enqueue(d,[a])};c.prototype.addWindowFocus=function(b){this._queue.enqueue(a.EVENT_WINDOW_FOCUS,[])};c.prototype.addWindowBlur=function(b){this._queue.enqueue(a.EVENT_WINDOW_BLUR,[])};c.prototype.maybeAddValueChange=function(){var a=this._doc.activeElement;if(a)this._inputWatcher.onChange(a)};c.prototype.addKeyDown=function(b){var d=this._doc.activeElement;if(!d||a.fsidIfNotBlocked(d))this.maybeAddValueChange(),
this._queue.enqueue(a.EVENT_KEYDOWN,[b.keyCode])};c.prototype.addKeyUp=function(b){var d=this._doc.activeElement;if(!d||a.fsidIfNotBlocked(d))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYUP,[b.keyCode])};c.prototype.addWindowInnerWidth=function(){try{var b=this._wnd.innerWidth}catch(d){return}b!=this._curInnerWidth&&(this._queue.enqueue(a.EVENT_INNERWIDTH,[b]),this._curInnerWidth=b)};c.prototype.doWorkInScrollTimeout=function(b,d){var c=this;b in this._scrollTimeouts||(this._scrollTimeouts[b]=
d,a.windex.setWindowTimeout(window,function(){if(b in c._scrollTimeouts){var a=c._scrollTimeouts[b];delete c._scrollTimeouts[b];a()}},a.ScrollSampleInterval))};c.prototype._fireScrollTimeouts=function(){for(var a in this._scrollTimeouts)this._scrollTimeouts[a](),delete this._scrollTimeouts[a];this._scrollTimeouts=[]};c.prototype.addWindowScroll=function(){var b=this,d=a.fsid(this._doc.body);d&&this.doWorkInScrollTimeout(d,function(){var c,e;"pageXOffset"in b._wnd?(c=b._wnd.pageXOffset,e=b._wnd.pageYOffset):
(c=b._doc.body.scrollLeft,e=b._doc.body.scrollTop);if(c!=b._curWindowScrollX||e!=b._curWindowScrollY)b._queue.enqueue(a.EVENT_SCROLL,[d,c,e]),b._curWindowScrollX=c,b._curWindowScrollY=e;b.addWindowInnerWidth()})};c.prototype.addScroll=function(b){var d=this,c=a.fsid(b);c&&"number"==typeof b.scrollLeft&&this.doWorkInScrollTimeout(c,function(){d._queue.enqueue(a.EVENT_SCROLL,[c,b.scrollLeft,b.scrollTop])})};c.prototype.addResize=function(){if(this._doc.body){var b,d;this._quirks?(b=this._doc.body.clientWidth,
d=this._doc.body.clientHeight):(b=this.docElem().clientWidth,d=this.docElem().clientHeight);if(b!=this._clientWidth||d!=this._clientHeight)this._clientWidth=b,this._clientHeight=d,b=Math.max(this._wnd.innerWidth||-1,this._clientWidth),this.isMediaValue("width",b)||(b=this.findMediaValue("width",b,b+128)||b),d=Math.max(this._wnd.innerHeight,this._clientHeight),this.isMediaValue("height",d)||(d=this.findMediaValue("height",d,d+128)||d),b==this._clientWidth&&d==this._clientHeight?this._queue.enqueue(a.EVENT_RESIZE,
[this._clientWidth,this._clientHeight]):this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight,b,d])}};c.prototype.isMediaValue=function(a,d){if("function"!=typeof this._wnd.matchMedia)return!0;var c=this._wnd.matchMedia("(min-"+a+": "+d+"px)");if(!c)return!0;var e=this._wnd.matchMedia("(max-"+a+": "+d+"px)");return e?c.matches&&e.matches:!0};c.prototype.findMediaValue=function(a,d,c){if(!this._wnd.matchMedia)return 0;for(;d<c;){var e=Math.floor((d+c)/2);if(this._wnd.matchMedia("(min-"+
a+": "+e+"px)").matches){if(this._wnd.matchMedia("(max-"+a+": "+e+"px)").matches)return e;d=e+1}else c=e-1}return 0};c.prototype.addDomLoaded=function(){this._queue.enqueue(a.EVENT_DOMLOADED,[])};c.prototype.addLoad=function(){this._queue.enqueue(a.EVENT_LOAD,[])};c.prototype.addNavigate=function(){var b=this._loc.href;this._currentUrl!=b&&(this._currentUrl=b,this._queue.enqueue(a.EVENT_NAVIGATE,[this._loc.href,this._doc.title]))};c.prototype.addClick=function(b){var d=b.target,c=a.fsid(d);if(c){var e=
0,f=0,g=0,k=0;d&&d.getBoundingClientRect&&(d=d.getBoundingClientRect(),e=d.left,f=d.top,g=d.width,k=d.height);this._queue.enqueue(a.EVENT_CLICK,[c,b.clientX,b.clientY,e,f,g,k])}};c.prototype.addDblClick=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_DBL_CLICK,[b])};c.prototype.addFormSubmit=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FORM_SUBMIT,[b])};c.prototype.addFocus=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FOCUS,[b])};c.prototype.addBlur=
function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_BLUR,[b])};c.prototype.addChange=function(a){this._inputWatcher.onChange(a.target)};c.prototype.addChangeElem=function(b){var d=a.fsidIfNotBlocked(b);d&&this._queue.enqueue(a.EVENT_VALUECHANGE,[d,a.valueOfInputishElem(b)])};c.prototype.addSelection=function(){for(var b=this.selectionArgs(),d=!1,c=0;4>c;c++)if(this._curSelection[c]!==b[c]){d=!0;break}d&&(this._curSelection=b,this._queue.enqueue(a.EVENT_SELECT,b))};c.prototype.selectionArgs=
function(){if(!this._wnd.getSelection)return[];var b=this._wnd.getSelection();if(!b||"None"==b.type)return[];if("Caret"==b.type){var d=a.fsid(b.anchorNode);return d?[d,b.anchorOffset]:[]}if(!b.anchorNode||!b.focusNode)return[];var c=k(b.anchorNode,b.anchorOffset),d=c[0],c=c[1],b=k(b.focusNode,b.focusOffset),e=b[0],f=b[1],e=(b=Boolean(d.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING))?[d,e]:[e,d],d=e[0],e=e[1],f=b?[c,f]:[f,c],c=f[0],f=f[1];for(a.fsid(d)||(c=0);d&&!a.fsid(d)&&d!=e;)d=d.nextSibling||
d.parentNode;for(a.fsid(e)||(f=0);e&&!a.fsid(e)&&e!=d;)e=e.previousSibling||e.parentNode;if(d==e&&c==f)return[];var g=a.fsid(d),m=a.fsid(e);return d&&e&&g&&m?[g,c,m,f,b]:[]};return c}();a.EventWatcher=f;a.getResourceUrls=g})(m||(m={}));(function(a){function k(b,d){b&&b.postMessage&&b.postMessage(a.stringify({__fs:d}),"*")}function g(b){try{var d=a.parseJson(b);if("__fs"in d)return d.__fs}catch(c){}return[]}function f(a){var b=a.src;return!a.hasAttribute("src")||"about:blank"==b||0==b.indexOf("javascript:")||
0==b.indexOf(c)}a.FS_REQUEST_FRAME_ID="RequestFrameId";a.FS_GREET_CHILD_FRAME="GreetFrame";a.FS_SET_FRAME_ID_CMD="SetFrameId";a.FS_IFRAME_EVENTS="EvtBundle";a.FS_SHUTDOWN_FRAME="ShutdownFrame";a.FS_RESTART_FRAME="RestartFrame";var c=location.protocol+"//"+location.host;a.defaultInjector=function(d,c,f,h){a.logIfDebug("Injecting into Frame ["+d.src+"]");try{if(d.id==d.name&&b.test(d.id))a.logIfDebug("Blacklisted iframe: "+d.src);else if(d.src&&("about:blank"!=d.src&&0>d.src.indexOf("javascript:"))&&
d.src!=d.contentWindow.location.href)a.logIfDebug("Frame not yet loaded: "+d.src);else if(d.contentWindow[a.Namespace(d.contentWindow)])a.logIfDebug("FS already defined in Frame contentWindow: "+d.src+". Ignoring.");else{var g=d.contentWindow,k=d.contentDocument;g._fs_org=c;g._fs_host=f;g._fs_debug=a.isDebug();g._fs_run_in_iframe=!0;var m=k.createElement("script");m.async=!0;m.src=h+"//"+f+"/s/fs.js";"testdrive"==c&&(m.src+="?allowMoo=true");k.head.appendChild(m)}}catch(r){a.logIfDebug("iFrame no injecty. Probably not same origin.")}};
var b=/^fb\d{18}$/,d;(function(a){a[a.NoInfoYet=1]="NoInfoYet";a[a.Enabled=2]="Enabled";a[a.Disabled=3]="Disabled"})(d=a.GetCurrentSessionEnabledState||(a.GetCurrentSessionEnabledState={}));var h=function(){function b(c,e,f,h){var g=this;this._ctx=c;this._injector=h;this._iFrames=[];this._pendingChildFrameIdInits=[];this._listeners=new a.DomListeners;this._getCurrentSessionEnabled=d.NoInfoYet;this._resourceUploadingEnabled=!1;this._tickerTasks=[];this._watcher=new a.Watcher;this._transport=f(c,function(){g.shutdown()});
this._queue=new a.EventQueue(c,this._transport,function(){for(var a=g._eventWatcher.bundleEvents(),b=void 0;b=g._tickerTasks.pop();)b();return a},e);this._eventWatcher=new a.EventWatcher(c,this._queue,this._watcher,this._listeners,function(a){g.onFrameCreated(a)},function(a){g.beforeFrameRemoved(a)});this._consoleWatcher=new a.ConsoleWatcher(this._queue,c.getWindow(),this._listeners);this._protocol=c.getProtocol();this._host=c.getHost();this._orgId=c.getOrgId();this._wnd=c.getWindow()}b.prototype.start=
function(b,d){var c=this;this._onFullyStarted=d;this._watcher.addPredicateRule({Selector:function(b){var d=a.tagName(b);if("object"==d)d="data";else if("embed"==d)d="src";else return!1;return!(S.IMAGE_FILENAME.test(b[d])&&(!b.type||0==b.type.lastIndexOf("image",0)))},Kind:a.WatchKindNYI});this._watcher.addRule({Selector:"canvas",Kind:a.WatchKindNYI});this._watcher.addRule({Selector:"noscript",Kind:a.WatchKindBlocked});this._watcher.addRule({Selector:".fs-hide",Kind:a.WatchKindHide});this._consoleWatcher.enable();
"onpagehide"in this._wnd?this._listeners.add(this._wnd,"pagehide",!1,function(a){c._queue.addUnload()}):this._listeners.add(this._wnd,"unload",!1,function(a){c._queue.addUnload()});this._listeners.add(this._wnd,"message",!1,function(a){"string"==typeof a.data&&c.postMessageReceived(a.source,g(a.data))});(this._docCloseHook=a.activateHook(this._wnd.Document.prototype,"close"))&&this._docCloseHook.afterAsync(function(){c._listeners.refresh()})};b.prototype.getCurrentSessionEnabled=function(){return this._getCurrentSessionEnabled};
b.prototype.queue=function(){return this._queue};b.prototype.eventWatcher=function(){return this._eventWatcher};b.prototype.console=function(){return this._consoleWatcher};b.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()};b.prototype.onLoad=function(){this._eventWatcher.onLoad()};b.prototype.shutdown=function(){this._queue.shutdown();this._eventWatcher.shutdown();this._consoleWatcher.disable();this._listeners.clear();this._docCloseHook&&this._docCloseHook.disable();this.tellAllFramesTo([a.FS_SHUTDOWN_FRAME])};
b.prototype.tellAllFramesTo=function(a){for(var b=0;b<this._iFrames.length;b++)k(this._iFrames[b].contentWindow,a)};b.prototype.getCurrentSessionURL=function(b){var c=this._getCurrentSessionEnabled;if(c==d.NoInfoYet)return null;var e;e=this._host;e=a.isLocalhost(a.domainFromHost(e))?e:0==e.indexOf("www.")?"app."+e.slice(4):"app."+e;if(c==d.Disabled)return this._protocol+"//"+e+"/opt/upgrade";c=this.getCurrentSession();if(!c)return null;b&&(c+=":"+this._ctx.wallTime());return this._protocol+"//"+e+
"/ui/"+this._ctx.getOrgId()+"/session/"+encodeURIComponent(c)};b.prototype.getCurrentSession=function(){var a=this._getCurrentSessionEnabled;return a!=d.NoInfoYet&&a!=d.Disabled&&this._userId?this._userId+":"+this._sessionId:null};b.prototype.fullyStarted=function(){this._onFullyStarted()};b.prototype.enableResourceUploading=function(){this._resourceUploadingEnabled=!0;this._eventWatcher.initResourceUploading()};b.prototype.flushPendingChildFrameInits=function(){if(0<this._pendingChildFrameIdInits.length){for(var a=
0;a<this._pendingChildFrameIdInits.length;a++)this._pendingChildFrameIdInits[a]();this._pendingChildFrameIdInits=[]}};b.prototype.onFrameCreated=function(b){var d=this;if(a.fsid(b)){this._iFrames.push(b);var c=f(b),e=!c||b.contentWindow[a.Namespace(b.contentWindow)];c&&!e||!b.contentWindow.postMessage?c?(a.logIfDebug("Attempting to setup Frame ["+b.src+"]"),this._injector(b,this._orgId,this._host,this._protocol),b.addEventListener("load",function(c){d._tickerTasks.push(function(){a.logIfDebug("onload for frame ["+
b.src+"]");d._injector(b,d._orgId,d._host,d._protocol)})})):a.logIfDebug("Frame Doesn't need injecting. Probably cross domain ["+b.src+"]"):k(b.contentWindow,[a.FS_GREET_CHILD_FRAME])}else a.logIfDebug("fsid missing or invalid for iFrame."+b.src)};b.prototype.beforeFrameRemoved=function(a){for(var b=0;b<this._iFrames.length;b++)if(a==this._iFrames[b]){this._iFrames.splice(b,1);break}};b.prototype.postMessageReceived=function(b,d){switch(d[0]){case a.FS_IFRAME_EVENTS:var c=d[1];0<c.length&&this._transport.enqueueEvents(c);
break;case a.FS_REQUEST_FRAME_ID:c=this.iFrameWndToFsId(b),b&&c?(a.logIfDebug("Responding to FID request for frame "+c),this.sendFrameIdToInnerFrame(b,c)):a.logIfDebug("No FrameId found. Hoping to send one later.")}};b.prototype.sendFrameIdToInnerFrame=function(b,d){var c=this,e=function(){var e=[];0!=c._frameId&&(e=c._parentIds?c._parentIds.concat(c._frameId):[c._frameId]);k(b,[a.FS_SET_FRAME_ID_CMD,d,e,c._ctx.startTime(),c._watcher.rawRules,c._protocol,c._host,c._orgId,c._userId,c._sessionId,c._pageId,
c.getCurrentSessionEnabled(),c._resourceUploadingEnabled])};null==this._frameId?this._pendingChildFrameIdInits.push(e):e()};b.prototype.iFrameWndToFsId=function(b){for(var d=0;d<this._iFrames.length;d++)if(this._iFrames[d].contentWindow==b)return a.fsid(this._iFrames[d]);a.logIfDebug("Unable to locate frame for window");return NaN};return b}();a.AbstractRecorder=h;a.parsePostMessageData=g})(m||(m={}));(function(a){function k(f,c){return new a.HttpEventTransport(f,c)}var g=function(f){function c(b,
d,c,e,g){void 0===d&&(d=a.RealTicker);void 0===c&&(c=new a.XHRPoster);void 0===e&&(e=k);void 0===g&&(g=a.defaultInjector);var l=f.call(this,b,d,e,g)||this;l._poster=c;l._domLoaded=!1;l._doc=l._wnd.document;l._frameId=0;l._identity=b.getIdentity();l._getCurrentSessionEnabled=a.GetCurrentSessionEnabledState.NoInfoYet;a.set_fs_shutdown(l._wnd,function(a){l._queue.shutdown();a&&(a=l._doc.getElementById(a))&&a.setAttribute("_fs_embed_token",l._embedToken)});return l}N(c,f);c.prototype.onDomLoad=function(){f.prototype.onDomLoad.call(this);
this._domLoaded=!0;this.injectIntegrationScript()};c.prototype.start=function(b,d){var c=this;f.prototype.start.call(this,b,d);var e=this._doc.documentElement,g=a._fs_replay_flags(this._wnd),k=a.tryGetScreenDims(this._wnd),m=k[0],k=k[1],t="";b||(t=this._identity.userId());e={OrgId:this._orgId,UserId:t,Url:location.href,Base:a.baseUri(this._doc),Width:e.clientWidth,Height:e.clientHeight,ScreenWidth:m,ScreenHeight:k,Referrer:this._doc.referrer,Doctype:a.doctypeString(this._doc),CompiledTimestamp:a.CompiledTimestamp};
g&&(e.ReplayFlags=g);this._poster.post(this._protocol,a.gceHost(this._host),"/rec/page",a.stringify(e),function(b){var d;try{d=a.parseJson(b)}catch(e){c.disableBecauseRecPageSaidSo();return}c.handleResponse(d);if(b=a._fs_ready(c._wnd))try{b()}catch(f){a.logIfDebug("exception in _fs_ready(): "+f)}c._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(c._doc),a.doctypeString(c._doc)]);c._queue.startPipeline(d.PageIntId);c.fullyStarted()},function(a){c.disableBecauseRecPageSaidSo()})};c.prototype.setIdsAndCookie=
function(b){var d=this._identity;d.setIds(this._wnd,b.CookieDomain,b.UserIntId,b.SessionIntId);this._userId=b.UserIntId;this._sessionId=b.SessionIntId;this._pageId=b.PageIntId;this._embedToken=b.EmbedToken;a.logIfDebug("/User,"+d.userId()+"/Session,"+d.sessionId()+"/Page,"+b.PageIntId)};c.prototype.injectIntegrationScript=function(){if(this._domLoaded&&this._integrationScript){var b=this._doc.createElement("script");a._fs_csp(this._wnd)?b.src=this._protocol+this._host+"/rec/integrations?OrgId="+this._orgId:
b.text=this._integrationScript;b.async=!0;this._doc.head.appendChild(b)}};c.prototype.handleResponse=function(b){this.setIdsAndCookie(b);this._integrationScript=b.IntegrationScript;this._getCurrentSessionEnabled=b.GetCurrentSessionEnabled?a.GetCurrentSessionEnabledState.Enabled:a.GetCurrentSessionEnabledState.Disabled;b.ResourceUploadingEnabled&&this.enableResourceUploading();this.injectIntegrationScript();if(b.Blocks)for(var d=0;d<b.Blocks.length;++d)this._watcher.addRule(b.Blocks[d]);if(b.Watches)for(d=
0;d<b.Watches.length;++d)this._watcher.addRule(b.Watches[d])};c.prototype.disableBecauseRecPageSaidSo=function(){this.shutdown();a.logIfDebug("Disabling FS.");var b=a._fs_ready(this._wnd);if(b)try{b(!0)}catch(d){a.logIfDebug("exception in _fs_ready(): "+d)}};return c}(a.AbstractRecorder);a.TopRecorder=g})(m||(m={}));(function(a){function k(f,c){return new a.PostMessageEventTransport(f.getWindow())}a.makeFrameTransport=k;var g=function(f){function c(b,d,c,e,g){void 0===d&&(d=a.RealTicker);void 0===
c&&(c=new a.PostMessagePoster);void 0===e&&(e=k);void 0===g&&(g=a.defaultInjector);b=f.call(this,b,d,e,g)||this;b._messagePoster=c;return b}N(c,f);c.prototype.start=function(a,d){f.prototype.start.call(this,a,d);this.sendRequestForFrameId()};c.prototype.postMessageReceived=function(b,d){f.prototype.postMessageReceived.call(this,b,d);switch(d[0]){case a.FS_GREET_CHILD_FRAME:this.sendRequestForFrameId();break;case a.FS_SET_FRAME_ID_CMD:try{this.setFrameIdFromOutside(d[1],d[2],d[3],d[4],d[5],d[6],d[7],
d[8],d[9],d[10],d[11],d[12])}catch(c){a.logIfDebug("Failed to parse frameId from message"+d)}}};c.prototype.sendRequestForFrameId=function(){this._frameId||(0==this._frameId?a.logIfDebug("For some reason the outer window attempted to request a frameId"):this._wnd.parent?(a.logIfDebug("Asking for a frame ID from within frame: "+location.href),this._messagePoster.postMessage(this._wnd.parent,a.FS_REQUEST_FRAME_ID,[])):a.logIfDebug("Orphaned window. Location href = "+location.href))};c.prototype.setFrameIdFromOutside=
function(b,d,c,e,f,g,k,m,p,q,r,s){if(b)if(this._frameId)this._frameId!=b?(a.logIfDebug("Updating frame id from "+this._frameId+" to "+b),this._ctx.splitPage()):a.logIfDebug("frame Id is already set to "+this._frameId);else{a.logIfDebug("FrameId received within frame "+location.href+": "+b);this._protocol=f;this._userId=m;this._sessionId=p;this._host=g;this._orgId=k;this._getCurrentSessionEnabled=r||a.GetCurrentSessionEnabledState.NoInfoYet;s&&this.enableResourceUploading();this._frameId=b;this._parentIds=
d;for(f=0;f<e.length;++f)this._watcher.addRule(e[f]);this._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(this._wnd.document),a.doctypeString(this._wnd.document)]);this._queue.rebaseIframe(c);this._ctx.setStartTime(c);this._pageId=q;this._queue.startPipeline(q,b,d);this.flushPendingChildFrameInits();this.fullyStarted()}else a.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+location.href)};return c}(a.AbstractRecorder);a.InnerRecorder=g})(m||(m={}));(function(a){function k(c){if(c==
top||a._fs_is_outer_script(c)||a._fs_run_in_iframe(c)||a._fs_transport(c))return!0;try{return c.parent.document,k(c.parent)}catch(b){return!1}}var g=function(){function c(){}c.prototype.createTopRecorder=function(b){return new a.TopRecorder(b)};c.prototype.createInnerRecorder=function(b){return new a.InnerRecorder(b)};return c}();a.DefaultRecorderMaker=g;var f=function(){function c(a,d){void 0===a&&(a=window);void 0===d&&(d=new g);this.wnd=a;this.recMaker=d;this.protocol="https:";this.domDoneLoaded=
!1;this._startTime=this.wallTime();this.splitPending=this.waitingOnStart=!1;this.reidentifyCount=0}c.prototype.init=function(){a.isLoaded(this.wnd)||(a.setLoaded(this.wnd,a.Namespace(this.wnd)),a.initWindex(this.wnd),this.initApi(),this.start())};c.prototype.wallTime=function(){return(new Date).getTime()};c.prototype.now=function(){return this.wallTime()-this._startTime};c.prototype.startTime=function(){return this._startTime};c.prototype.setStartTime=function(a){this._startTime=a};c.prototype.getHost=
function(){return this.host};c.prototype.getProtocol=function(){return this.protocol};c.prototype.getOrgId=function(){return this.orgId};c.prototype.getIdentity=function(){return this.identity};c.prototype.getVars=function(){return this.vars};c.prototype.getWindow=function(){return this.wnd};c.prototype.getCurrentSessionURL=function(a){return this.recorder?this.recorder.getCurrentSessionURL(a):null};c.prototype.getCurrentSession=function(){return this.recorder?this.recorder.getCurrentSession():null};
c.prototype.enableConsole=function(){this.recorder&&this.recorder.console().enable()};c.prototype.disableConsole=function(){this.recorder&&this.recorder.console().disable()};c.prototype.log=function(a){for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];this.recorder&&("log"!==a&&("info"!==a&&"warn"!==a&&"error"!==a&&"debug"!==a)&&(d.unshift(a),a="log"),this.recorder.console().addLog(a,d))};c.prototype.shutdown=function(){this.recorder?(this.recorder.shutdown(),this.recorder=null):a.logIfDebug("Recording already shut down.")};
c.prototype.restart=function(){this.recorder?a.logIfDebug("Recording already started."):this.createRecorder(!0)};c.prototype.splitPage=function(b){return y(this,void 0,void 0,function(){return J(this,function(c){switch(c.label){case 0:if(b&&null==this.identity)return a.logIfDebug("Can't re-identify from an iframe"),[2];if(this.waitingOnStart)return this.splitPending=!0,[2];this.shutdown();return[4,a.wait(0)];case 1:return c.sent(),[4,a.wait(0)];case 2:return c.sent(),b&&this.identity&&this.identity.clear(),
this.restart(),[2]}})})};c.prototype._api=function(b,c){if(this.inFrame)a.logIfDebug("API calls may only be made from the top-most frame");else if(this.recorder){var f=this.vars.api(b,c),e=f[0];if(f[1]){if(8>this.reidentifyCount){this.reidentifyCount++;a.FS_q_push(this.wnd,[b,c]);this.splitPage(!0);return}a.logIfDebug("reidentified too many times; giving up")}for(f=0;f<e.length;f++)this.recorder.queue().enqueue(e[f].Kind,e[f].Args)}else a.FS_q_push(this.wnd,[b,c])};c.prototype._cookies=function(){if(this.identity)return this.identity.cookies();
a.logIfDebug("Error in FS integration: Can't get cookies from inside an iframe");return null};c.prototype._setCookie=function(b,c){this.identity?this.identity.setCookie(b,c):a.logIfDebug("Error in FS integration: Can't set cookies from inside an iframe")};c.prototype.initApi=function(){var b=this.wnd[a.Namespace(this.wnd)];b.getCurrentSessionURL=a.$entry(this.getCurrentSessionURL,this);b.getCurrentSession=a.$entry(this.getCurrentSession,this);b.enableConsole=a.$entry(this.enableConsole,this);b.disableConsole=
a.$entry(this.disableConsole,this);b.log=a.$entry(this.log,this);b.shutdown=a.$entry(this.shutdown,this);b.restart=a.$entry(this.restart,this);b._api=a.$entry(this._api,this);b._cookies=a.$entry(this._cookies,this);b._setCookie=a.$entry(this._setCookie,this)};c.prototype.start=function(){var b=this;a.initDebug(this.wnd);a.logIfDebug("script version "+a.CompiledVersion+" (compiled at "+a.CompiledTimestamp+")");this.host=a._fs_host(this.wnd);this.orgId=a._fs_org(this.wnd);this.host?this.orgId?(a.logIfDebug("host: "+
this.host),a.logIfDebug("orgid: "+this.orgId),"localhost:8080"==this.host&&(this.protocol="http:"),this.inFrame||(this.identity=new a.Identity(this.wnd.document),this.vars=new a.Vars(this.identity),this.identity.initFromCookies(this.host,this.orgId)),this.canRecord(this.orgId)?(this.createRecorder().eventWatcher().watchEvents(),this.hookLoadEvents(),this.wnd.addEventListener("message",function(c){if("string"==typeof c.data)switch(a.parsePostMessageData(c.data)[0]){case a.FS_SHUTDOWN_FRAME:b.shutdown();
break;case a.FS_RESTART_FRAME:b.restart()}})):this.hailMary()):a.logIfDebug("Missing global _fs_org. Recording disabled."):a.logIfDebug("Missing global _fs_host. Recording disabled.")};c.prototype.createRecorder=function(b){var c=this;this._startTime=this.wallTime();var f,e;if(this.inFrame)this.recorder=this.recMaker.createInnerRecorder(this);else{this.recorder=this.recMaker.createTopRecorder(this);e=this.drainApiQueue(a.FS_q_drain(this.wnd));f=e[0];e=e[1];for(var g=0;g<f.length;g++)this.recorder.queue().enqueue(f[g].Kind,
f[g].Args)}this.waitingOnStart=!0;this.recorder.start(e,function(){c.waitingOnStart=!1;b&&c.recorder&&c.recorder.tellAllFramesTo([a.FS_RESTART_FRAME]);c.splitPending&&(c.splitPending=!1,c.splitPage())});b&&this.recorder.eventWatcher().watchEvents();return this.recorder};c.prototype.drainApiQueue=function(a){if(!a)return[[],!1];for(var c=!1,f=[],e=0;e<a.length;e++){var g=this.vars.api(a[e][0],a[e][1]),k=g[0];g[1]&&(f=[],c=!0);f=f.concat(k)}return[f,c]};c.prototype.determineFrameness=function(b){var c=
a._fs_transport(this.wnd);a._fs_is_outer_script(this.wnd)?this.inFrame=!1:this.wnd!=top?this.inFrame=!0:c?c.init&&c.init(b)&&(this.inFrame=!0):this.inFrame=!1};c.prototype.canRecord=function(b){this.determineFrameness(b);return this.wnd.MutationEvent&&this.wnd.postMessage?k(this.wnd)?!0:(a.logIfDebug("Fullstory recording for this page is NOT allowed within an iFrame."),!1):(a.logIfDebug("missing required browser features"),!1)};c.prototype.hailMary=function(){var b=this;if(this.identity){var c=document.documentElement,
f=a._fs_replay_flags(this.wnd);a.logIfDebug("Unable to record playback stream.");var e=document.createElement("script");this.wnd.__fs_startResponse=function(a){a&&b.identity.setIds(b.wnd,a.CookieDomain,a.UserIntId,a.SessionIntId);document.head.removeChild(e)};e.src="//"+this.host+"/rec/page?OrgId="+this.orgId+"&UserId="+this.identity.userId()+"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(a.baseUri(document))+"&Width="+c.clientWidth+"&Height="+c.clientHeight+"&ScreenWidth="+
this.wnd.screen.width+"&ScreenHeight="+this.wnd.screen.height+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(a.doctypeString(document))+"&CompiledTimestamp="+a.CompiledTimestamp+"&Fallback=true"+(f?"&ReplayFlags="+f:"");document.head.appendChild(e)}};c.prototype.hookLoadEvents=function(){var a=this,c=function(){a.domDoneLoaded||(a.domDoneLoaded=!0,a.recorder&&a.recorder.onDomLoad())},f=!1,e=function(){f||(f=!0,a.recorder&&a.recorder.onLoad())};switch(document.readyState){case "interactive":document.attachEvent||
c();break;case "complete":c(),e()}this.domDoneLoaded||document.addEventListener("DOMContentLoaded",function(a){c()});f||this.wnd.addEventListener("load",function(a){c();e()})};return c}();a.GlobalContext=f})(m||(m={}));try{(new m.GlobalContext).init()}catch(V){m.sendToBugsnag(V,"error"),m._fs_debug(window)&&window.console&&console.log&&console.log("Failed to initialize FullStory.")}})();
